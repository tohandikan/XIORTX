<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FoodOrder - Pesan Makanan Online</title>
    <style>
        body {
            box-sizing: border-box;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: inherit;
        }

        :root {
            --primary: #ff6b35;
            --primary-dark: #e55a2b;
            --secondary: #2c3e50;
            --accent: #f39c12;
            --success: #27ae60;
            --danger: #e74c3c;
            --light: #ecf0f1;
            --dark: #2c3e50;
            --shadow: 0 2px 10px rgba(0,0,0,0.1);
            --border-radius: 8px;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--dark);
            background: #f8f9fa;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header */
        .header {
            background: white;
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 0;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--primary);
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 2rem;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--dark);
            font-weight: 500;
            transition: color 0.3s;
        }

        .nav-links a:hover,
        .nav-links a.active {
            color: var(--primary);
        }

        .cart-icon {
            position: relative;
            background: var(--primary);
            color: white;
            border: none;
            padding: 0.8rem;
            border-radius: 50%;
            cursor: pointer;
            transition: background 0.3s;
        }

        .cart-icon:hover {
            background: var(--primary-dark);
        }

        .cart-count {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--danger);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Pages */
        .page {
            display: none;
            min-height: calc(100vh - 80px);
            padding: 2rem 0;
        }

        .page.active {
            display: block;
        }

        /* Home Page */
        .hero {
            background: linear-gradient(135deg, var(--primary), var(--accent));
            color: white;
            text-align: center;
            padding: 4rem 0;
            border-radius: var(--border-radius);
            margin-bottom: 3rem;
        }

        .hero h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .hero p {
            font-size: 1.2rem;
            margin-bottom: 2rem;
        }

        .btn {
            display: inline-block;
            padding: 0.8rem 2rem;
            background: var(--primary);
            color: white;
            text-decoration: none;
            border-radius: var(--border-radius);
            border: none;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s;
        }

        .btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: white;
            color: var(--primary);
        }

        .btn-secondary:hover {
            background: var(--light);
        }

        /* Menu Grid */
        .menu-filters {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 0.5rem 1rem;
            border: 2px solid var(--primary);
            background: white;
            color: var(--primary);
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: all 0.3s;
        }

        .filter-btn.active,
        .filter-btn:hover {
            background: var(--primary);
            color: white;
        }

        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .menu-item {
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            overflow: hidden;
            transition: transform 0.3s;
            cursor: pointer;
        }

        .menu-item:hover {
            transform: translateY(-5px);
        }

        .menu-item img {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .menu-item-content {
            padding: 1.5rem;
        }

        .menu-item h3 {
            margin-bottom: 0.5rem;
            color: var(--dark);
        }

        .menu-item p {
            color: #666;
            margin-bottom: 1rem;
            font-size: 0.9rem;
        }

        .price {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 1rem;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 2000;
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            border-radius: var(--border-radius);
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }

        .modal-header {
            padding: 1.5rem;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #666;
        }

        .modal-body {
            padding: 1.5rem;
        }

        /* Form Elements */
        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        .form-control {
            width: 100%;
            padding: 0.8rem;
            border: 2px solid #ddd;
            border-radius: var(--border-radius);
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary);
        }

        .quantity-selector {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .qty-btn {
            width: 40px;
            height: 40px;
            border: 2px solid var(--primary);
            background: white;
            color: var(--primary);
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .qty-btn:hover {
            background: var(--primary);
            color: white;
        }

        .qty-input {
            width: 60px;
            text-align: center;
            border: 2px solid #ddd;
            border-radius: var(--border-radius);
            padding: 0.5rem;
        }

        /* Cart */
        .cart-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            border-bottom: 1px solid #eee;
        }

        .cart-item img {
            width: 60px;
            height: 60px;
            object-fit: cover;
            border-radius: var(--border-radius);
        }

        .cart-item-info {
            flex: 1;
        }

        .cart-item-name {
            font-weight: 500;
            margin-bottom: 0.25rem;
        }

        .cart-item-variant {
            font-size: 0.9rem;
            color: #666;
        }

        .cart-total {
            background: var(--light);
            padding: 1.5rem;
            border-radius: var(--border-radius);
            margin-top: 2rem;
        }

        /* Loading */
        .loading {
            display: none;
            text-align: center;
            padding: 2rem;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid var(--primary);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Notifications */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 1rem 1.5rem;
            border-radius: var(--border-radius);
            color: white;
            z-index: 3000;
            transform: translateX(400px);
            transition: transform 0.3s;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            background: var(--success);
        }

        .notification.error {
            background: var(--danger);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }

            .hero h1 {
                font-size: 2rem;
            }

            .menu-grid {
                grid-template-columns: 1fr;
            }

            .modal-content {
                width: 95%;
            }

            .cart-item {
                flex-direction: column;
                align-items: flex-start;
            }
        }

        /* Admin Dashboard */
        .admin-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: white;
            padding: 1.5rem;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            text-align: center;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary);
        }

        .orders-table {
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            overflow: hidden;
        }

        .table {
            width: 100%;
            border-collapse: collapse;
        }

        .table th,
        .table td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        .table th {
            background: var(--light);
            font-weight: 600;
        }

        .status-badge {
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .status-pending {
            background: #fff3cd;
            color: #856404;
        }

        .status-completed {
            background: #d4edda;
            color: #155724;
        }

        .mobile-nav {
            display: none;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            padding: 1rem;
        }

        .mobile-nav-items {
            display: flex;
            justify-content: space-around;
        }

        .mobile-nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-decoration: none;
            color: #666;
            font-size: 0.8rem;
        }

        .mobile-nav-item.active {
            color: var(--primary);
        }

        @media (max-width: 768px) {
            .mobile-nav {
                display: block;
            }
            
            .page {
                padding-bottom: 100px;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <nav class="container">
            <div class="nav">
                <div class="logo">🍕 FoodOrder</div>
                <ul class="nav-links">
                    <li><a href="#" onclick="showPage('home')" class="nav-link active">Beranda</a></li>
                    <li><a href="#" onclick="showPage('menu')" class="nav-link">Menu</a></li>
                    <li><a href="#" onclick="showPage('cart')" class="nav-link">Keranjang</a></li>
                    <li><a href="#" onclick="showPage('admin')" class="nav-link">Admin</a></li>
                </ul>
                <button class="cart-icon" onclick="showPage('cart')" aria-label="Buka keranjang">
                    🛒
                    <span class="cart-count" id="cartCount">0</span>
                </button>
            </div>
        </nav>
    </header>

    <!-- Home Page -->
    <div id="home" class="page active">
        <div class="container">
            <div class="hero">
                <h1>Selamat Datang di FoodOrder</h1>
                <p>Pesan makanan favorit Anda dengan mudah dan cepat</p>
                <a href="#" onclick="showPage('menu')" class="btn btn-secondary">Lihat Menu</a>
            </div>
            
            <!-- Features Section -->
            <section class="features-section" style="margin: 3rem 0;">
                <h2 style="text-align: center; margin-bottom: 2rem;">Mengapa Pilih FoodOrder?</h2>
                <div class="features-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 2rem;">
                    <div class="feature-card" style="background: white; padding: 2rem; border-radius: 8px; box-shadow: var(--shadow); text-align: center;">
                        <div style="font-size: 3rem; margin-bottom: 1rem;">🚀</div>
                        <h3>Pengiriman Cepat</h3>
                        <p>Makanan sampai dalam 30-45 menit dengan kualitas terjaga</p>
                    </div>
                    <div class="feature-card" style="background: white; padding: 2rem; border-radius: 8px; box-shadow: var(--shadow); text-align: center;">
                        <div style="font-size: 3rem; margin-bottom: 1rem;">🍽️</div>
                        <h3>Menu Beragam</h3>
                        <p>50+ pilihan menu dari makanan tradisional hingga internasional</p>
                    </div>
                    <div class="feature-card" style="background: white; padding: 2rem; border-radius: 8px; box-shadow: var(--shadow); text-align: center;">
                        <div style="font-size: 3rem; margin-bottom: 1rem;">💳</div>
                        <h3>Pembayaran Mudah</h3>
                        <p>Berbagai metode pembayaran: COD, Transfer, E-Wallet</p>
                    </div>
                    <div class="feature-card" style="background: white; padding: 2rem; border-radius: 8px; box-shadow: var(--shadow); text-align: center;">
                        <div style="font-size: 3rem; margin-bottom: 1rem;">⭐</div>
                        <h3>Kualitas Terjamin</h3>
                        <p>Bahan segar dan higienis dengan standar keamanan pangan</p>
                    </div>
                </div>
            </section>

            <!-- Recommended Menu -->
            <section class="recommended-section">
                <h2 style="text-align: center; margin-bottom: 2rem;">Menu Rekomendasi</h2>
                <div class="menu-grid" id="recommendedMenu"></div>
                <div style="text-align: center; margin-top: 2rem;">
                    <a href="#" onclick="showPage('menu')" class="btn">Lihat Semua Menu</a>
                </div>
            </section>

            <!-- Testimonials -->
            <section class="testimonials-section" style="background: white; padding: 3rem 2rem; border-radius: 8px; box-shadow: var(--shadow); margin: 3rem 0;">
                <h2 style="text-align: center; margin-bottom: 2rem;">Apa Kata Pelanggan</h2>
                <div class="testimonials-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem;">
                    <div class="testimonial" style="text-align: center; padding: 1.5rem;">
                        <div style="font-size: 2rem; margin-bottom: 1rem;">⭐⭐⭐⭐⭐</div>
                        <p style="font-style: italic; margin-bottom: 1rem;">"Makanannya enak banget! Pengiriman juga cepat. Pasti order lagi!"</p>
                        <strong>- Sarah, Jakarta</strong>
                    </div>
                    <div class="testimonial" style="text-align: center; padding: 1.5rem;">
                        <div style="font-size: 2rem; margin-bottom: 1rem;">⭐⭐⭐⭐⭐</div>
                        <p style="font-style: italic; margin-bottom: 1rem;">"Menu lengkap, harga terjangkau. Aplikasinya juga mudah digunakan."</p>
                        <strong>- Budi, Bandung</strong>
                    </div>
                    <div class="testimonial" style="text-align: center; padding: 1.5rem;">
                        <div style="font-size: 2rem; margin-bottom: 1rem;">⭐⭐⭐⭐⭐</div>
                        <p style="font-style: italic; margin-bottom: 1rem;">"Rendangnya juara! Rasanya autentik seperti buatan rumah."</p>
                        <strong>- Siti, Yogyakarta</strong>
                    </div>
                </div>
            </section>

            <!-- Contact Info -->
            <section class="contact-section" style="background: linear-gradient(135deg, var(--primary), var(--accent)); color: white; padding: 3rem 2rem; border-radius: 8px; margin: 3rem 0; text-align: center;">
                <h2 style="margin-bottom: 2rem;">Hubungi Kami</h2>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 2rem;">
                    <div>
                        <div style="font-size: 2rem; margin-bottom: 0.5rem;">📱</div>
                        <strong>WhatsApp</strong>
                        <p>082225544756</p>
                    </div>
                    <div>
                        <div style="font-size: 2rem; margin-bottom: 0.5rem;">📧</div>
                        <strong>Email</strong>
                        <p>info@foodorder.com</p>
                    </div>
                    <div>
                        <div style="font-size: 2rem; margin-bottom: 0.5rem;">🕒</div>
                        <strong>Jam Operasional</strong>
                        <p>08:00 - 22:00 WIB</p>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <!-- Menu Page -->
    <div id="menu" class="page">
        <div class="container">
            <div class="menu-header" style="text-align: center; margin-bottom: 3rem;">
                <h1>Menu Makanan</h1>
                <p style="color: #666; font-size: 1.1rem;">Temukan makanan favorit Anda dari 50+ pilihan menu lezat</p>
            </div>

            <!-- Search Bar -->
            <div class="search-section" style="margin-bottom: 2rem;">
                <div style="position: relative; max-width: 500px; margin: 0 auto;">
                    <input type="text" id="searchInput" placeholder="Cari menu favorit Anda..." 
                           style="width: 100%; padding: 1rem 3rem 1rem 1rem; border: 2px solid #ddd; border-radius: 25px; font-size: 1rem;"
                           oninput="searchMenu(this.value)">
                    <span style="position: absolute; right: 1rem; top: 50%; transform: translateY(-50%); color: #666;">🔍</span>
                </div>
            </div>

            <!-- Promo Banner -->
            <div class="promo-banner" style="background: linear-gradient(135deg, #ff6b35, #f39c12); color: white; padding: 2rem; border-radius: 8px; margin-bottom: 2rem; text-align: center;">
                <h3 style="margin-bottom: 0.5rem;">🎉 Promo Spesial Hari Ini!</h3>
                <p style="margin-bottom: 1rem;">Gratis ongkir untuk pembelian minimal Rp 50.000</p>
                <span style="background: rgba(255,255,255,0.2); padding: 0.5rem 1rem; border-radius: 20px; font-size: 0.9rem;">
                    Berlaku sampai 23:59 WIB
                </span>
            </div>
            
            <div class="menu-filters" id="menuFilters"></div>
            
            <!-- Menu Stats -->
            <div class="menu-stats" style="display: flex; justify-content: center; gap: 2rem; margin-bottom: 2rem; flex-wrap: wrap;">
                <div style="text-align: center;">
                    <div style="font-size: 1.5rem; font-weight: bold; color: var(--primary);" id="totalMenuCount">50</div>
                    <div style="font-size: 0.9rem; color: #666;">Total Menu</div>
                </div>
                <div style="text-align: center;">
                    <div style="font-size: 1.5rem; font-weight: bold; color: var(--primary);" id="filteredMenuCount">50</div>
                    <div style="font-size: 0.9rem; color: #666;">Ditampilkan</div>
                </div>
                <div style="text-align: center;">
                    <div style="font-size: 1.5rem; font-weight: bold; color: var(--primary);">5</div>
                    <div style="font-size: 0.9rem; color: #666;">Kategori</div>
                </div>
            </div>
            
            <div class="menu-grid" id="menuGrid"></div>

            <!-- Popular Items -->
            <section class="popular-section" style="margin-top: 4rem;">
                <h2 style="text-align: center; margin-bottom: 2rem;">Menu Paling Populer</h2>
                <div class="popular-items" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem;">
                    <div style="background: white; padding: 1.5rem; border-radius: 8px; box-shadow: var(--shadow); text-align: center;">
                        <div style="font-size: 2rem; margin-bottom: 0.5rem;">🍛</div>
                        <h4>Nasi Gudeg Jogja</h4>
                        <p style="color: #666; font-size: 0.9rem;">Terjual 150+ porsi</p>
                    </div>
                    <div style="background: white; padding: 1.5rem; border-radius: 8px; box-shadow: var(--shadow); text-align: center;">
                        <div style="font-size: 2rem; margin-bottom: 0.5rem;">🥩</div>
                        <h4>Rendang Daging</h4>
                        <p style="color: #666; font-size: 0.9rem;">Terjual 120+ porsi</p>
                    </div>
                    <div style="background: white; padding: 1.5rem; border-radius: 8px; box-shadow: var(--shadow); text-align: center;">
                        <div style="font-size: 2rem; margin-bottom: 0.5rem;">🍕</div>
                        <h4>Pizza Margherita</h4>
                        <p style="color: #666; font-size: 0.9rem;">Terjual 100+ porsi</p>
                    </div>
                    <div style="background: white; padding: 1.5rem; border-radius: 8px; box-shadow: var(--shadow); text-align: center;">
                        <div style="font-size: 2rem; margin-bottom: 0.5rem;">🍹</div>
                        <h4>Es Cendol</h4>
                        <p style="color: #666; font-size: 0.9rem;">Terjual 200+ gelas</p>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <!-- Cart Page -->
    <div id="cart" class="page">
        <div class="container">
            <div class="cart-header" style="text-align: center; margin-bottom: 2rem;">
                <h1>Keranjang Belanja</h1>
                <p style="color: #666;">Review pesanan Anda sebelum checkout</p>
            </div>

            <!-- Promo Alert -->
            <div id="promoAlert" class="promo-alert" style="background: #d4edda; border: 1px solid #c3e6cb; color: #155724; padding: 1rem; border-radius: 8px; margin-bottom: 2rem; display: none;">
                <div style="display: flex; align-items: center; gap: 0.5rem;">
                    <span>🎉</span>
                    <span><strong>Selamat!</strong> Anda mendapat gratis ongkir karena belanja minimal Rp 50.000</span>
                </div>
            </div>
            
            <div id="cartItems"></div>

            <!-- Shopping Tips -->
            <div id="shoppingTips" class="shopping-tips" style="background: white; padding: 2rem; border-radius: 8px; box-shadow: var(--shadow); margin: 2rem 0;">
                <h3 style="margin-bottom: 1rem; color: var(--primary);">💡 Tips Belanja</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem;">
                    <div style="display: flex; align-items: start; gap: 1rem;">
                        <span style="font-size: 1.5rem;">🚚</span>
                        <div>
                            <strong>Gratis Ongkir</strong>
                            <p style="color: #666; font-size: 0.9rem; margin-top: 0.25rem;">Belanja minimal Rp 50.000 untuk gratis ongkos kirim</p>
                        </div>
                    </div>
                    <div style="display: flex; align-items: start; gap: 1rem;">
                        <span style="font-size: 1.5rem;">⏰</span>
                        <div>
                            <strong>Pengiriman Cepat</strong>
                            <p style="color: #666; font-size: 0.9rem; margin-top: 0.25rem;">Pesan sebelum jam 21:00 untuk pengiriman hari yang sama</p>
                        </div>
                    </div>
                    <div style="display: flex; align-items: start; gap: 1rem;">
                        <span style="font-size: 1.5rem;">🍽️</span>
                        <div>
                            <strong>Paket Hemat</strong>
                            <p style="color: #666; font-size: 0.9rem; margin-top: 0.25rem;">Tambah minuman dan dessert untuk paket lengkap</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Recommended Add-ons -->
            <div id="recommendedAddons" class="recommended-addons" style="background: white; padding: 2rem; border-radius: 8px; box-shadow: var(--shadow); margin: 2rem 0;">
                <h3 style="margin-bottom: 1rem; color: var(--primary);">🍹 Tambahan yang Direkomendasikan</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                    <div style="border: 1px solid #ddd; border-radius: 8px; padding: 1rem; text-align: center;">
                        <div style="font-size: 2rem; margin-bottom: 0.5rem;">🥤</div>
                        <h4 style="font-size: 0.9rem; margin-bottom: 0.5rem;">Es Teh Manis</h4>
                        <div style="color: var(--primary); font-weight: bold; margin-bottom: 0.5rem;">Rp 5.000</div>
                        <button class="btn" style="padding: 0.5rem 1rem; font-size: 0.8rem;" onclick="quickAddToCart(11)">+ Tambah</button>
                    </div>
                    <div style="border: 1px solid #ddd; border-radius: 8px; padding: 1rem; text-align: center;">
                        <div style="font-size: 2rem; margin-bottom: 0.5rem;">🍪</div>
                        <h4 style="font-size: 0.9rem; margin-bottom: 0.5rem;">Keripik Singkong</h4>
                        <div style="color: var(--primary); font-weight: bold; margin-bottom: 0.5rem;">Rp 8.000</div>
                        <button class="btn" style="padding: 0.5rem 1rem; font-size: 0.8rem;" onclick="quickAddToCart(21)">+ Tambah</button>
                    </div>
                    <div style="border: 1px solid #ddd; border-radius: 8px; padding: 1rem; text-align: center;">
                        <div style="font-size: 2rem; margin-bottom: 0.5rem;">🍨</div>
                        <h4 style="font-size: 0.9rem; margin-bottom: 0.5rem;">Es Krim Vanilla</h4>
                        <div style="color: var(--primary); font-weight: bold; margin-bottom: 0.5rem;">Rp 15.000</div>
                        <button class="btn" style="padding: 0.5rem 1rem; font-size: 0.8rem;" onclick="quickAddToCart(31)">+ Tambah</button>
                    </div>
                </div>
            </div>
            
            <div class="cart-total" id="cartTotal" style="display: none;">
                <div style="display: flex; justify-content: space-between; margin-bottom: 1rem;">
                    <span>Subtotal:</span>
                    <span id="subtotal">Rp 0</span>
                </div>
                <div style="display: flex; justify-content: space-between; margin-bottom: 1rem;">
                    <span>Ongkos Kirim:</span>
                    <span id="shipping">Rp 10.000</span>
                </div>
                <div style="display: flex; justify-content: space-between; font-weight: bold; font-size: 1.2rem; border-top: 2px solid #ddd; padding-top: 1rem;">
                    <span>Total:</span>
                    <span id="total">Rp 0</span>
                </div>
                
                <!-- Delivery Time -->
                <div style="background: #f8f9fa; padding: 1rem; border-radius: 8px; margin: 1rem 0; text-align: center;">
                    <div style="display: flex; align-items: center; justify-content: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                        <span>🕒</span>
                        <strong>Estimasi Pengiriman</strong>
                    </div>
                    <p style="color: #666; margin: 0;">30-45 menit setelah konfirmasi pesanan</p>
                </div>

                <button class="btn" onclick="showCheckout()" style="width: 100%; margin-top: 1rem;">
                    Lanjut ke Checkout
                </button>
            </div>

            <!-- Empty Cart Message Enhancement -->
            <div id="emptyCartEnhanced" style="display: none; text-align: center; padding: 3rem; background: white; border-radius: 8px; box-shadow: var(--shadow);">
                <div style="font-size: 4rem; margin-bottom: 1rem;">🛒</div>
                <h3 style="margin-bottom: 1rem;">Keranjang Masih Kosong</h3>
                <p style="color: #666; margin-bottom: 2rem;">Yuk, pilih makanan favorit Anda dan mulai berbelanja!</p>
                <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
                    <button class="btn" onclick="showPage('menu')">Lihat Menu</button>
                    <button class="btn btn-secondary" onclick="showPage('home')">Kembali ke Beranda</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Page -->
    <div id="admin" class="page">
        <div class="container">
            <div class="admin-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; flex-wrap: wrap; gap: 1rem;">
                <div>
                    <h1>Dashboard Admin</h1>
                    <p style="color: #666; margin: 0;">Kelola dan pantau pesanan pelanggan</p>
                </div>
                <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                    <button class="btn btn-secondary" onclick="refreshAdminData()" style="display: flex; align-items: center; gap: 0.5rem;">
                        🔄 Refresh Data
                    </button>
                    <button class="btn" onclick="exportOrders()" style="display: flex; align-items: center; gap: 0.5rem;">
                        📊 Export Data
                    </button>
                </div>
            </div>

            <!-- Time Filter -->
            <div class="time-filter" style="background: white; padding: 1.5rem; border-radius: 8px; box-shadow: var(--shadow); margin-bottom: 2rem;">
                <h3 style="margin-bottom: 1rem;">📅 Filter Periode</h3>
                <div style="display: flex; gap: 1rem; flex-wrap: wrap; align-items: center;">
                    <button class="filter-btn active" onclick="filterByPeriod('today')">Hari Ini</button>
                    <button class="filter-btn" onclick="filterByPeriod('week')">Minggu Ini</button>
                    <button class="filter-btn" onclick="filterByPeriod('month')">Bulan Ini</button>
                    <button class="filter-btn" onclick="filterByPeriod('all')">Semua</button>
                    <div style="margin-left: auto; color: #666; font-size: 0.9rem;" id="lastUpdate">
                        Terakhir diperbarui: -
                    </div>
                </div>
            </div>
            
            <div class="admin-stats">
                <div class="stat-card">
                    <div class="stat-number" id="totalOrders">0</div>
                    <div>Total Pesanan</div>
                    <div style="font-size: 0.8rem; color: #666; margin-top: 0.5rem;" id="ordersGrowth">+0% dari periode sebelumnya</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="totalRevenue">Rp 0</div>
                    <div>Total Pendapatan</div>
                    <div style="font-size: 0.8rem; color: #666; margin-top: 0.5rem;" id="revenueGrowth">+0% dari periode sebelumnya</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="pendingOrders">0</div>
                    <div>Pesanan Pending</div>
                    <div style="font-size: 0.8rem; color: #666; margin-top: 0.5rem;">Perlu ditindaklanjuti</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="avgOrderValue">Rp 0</div>
                    <div>Rata-rata Pesanan</div>
                    <div style="font-size: 0.8rem; color: #666; margin-top: 0.5rem;">Per transaksi</div>
                </div>
            </div>

            <!-- Popular Menu Analytics -->
            <div class="popular-menu-analytics" style="background: white; padding: 2rem; border-radius: 8px; box-shadow: var(--shadow); margin: 2rem 0;">
                <h3 style="margin-bottom: 1.5rem;">📈 Menu Terpopuler</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                    <div style="border: 1px solid #ddd; border-radius: 8px; padding: 1rem; text-align: center;">
                        <div style="font-size: 2rem; margin-bottom: 0.5rem;">🥇</div>
                        <h4 style="margin-bottom: 0.5rem;">Nasi Gudeg Jogja</h4>
                        <div style="color: var(--primary); font-weight: bold;">150 terjual</div>
                        <div style="font-size: 0.8rem; color: #666;">Rp 3.750.000 revenue</div>
                    </div>
                    <div style="border: 1px solid #ddd; border-radius: 8px; padding: 1rem; text-align: center;">
                        <div style="font-size: 2rem; margin-bottom: 0.5rem;">🥈</div>
                        <h4 style="margin-bottom: 0.5rem;">Rendang Daging</h4>
                        <div style="color: var(--primary); font-weight: bold;">120 terjual</div>
                        <div style="font-size: 0.8rem; color: #666;">Rp 4.200.000 revenue</div>
                    </div>
                    <div style="border: 1px solid #ddd; border-radius: 8px; padding: 1rem; text-align: center;">
                        <div style="font-size: 2rem; margin-bottom: 0.5rem;">🥉</div>
                        <h4 style="margin-bottom: 0.5rem;">Pizza Margherita</h4>
                        <div style="color: var(--primary); font-weight: bold;">100 terjual</div>
                        <div style="font-size: 0.8rem; color: #666;">Rp 4.500.000 revenue</div>
                    </div>
                    <div style="border: 1px solid #ddd; border-radius: 8px; padding: 1rem; text-align: center;">
                        <div style="font-size: 2rem; margin-bottom: 0.5rem;">🏆</div>
                        <h4 style="margin-bottom: 0.5rem;">Es Cendol</h4>
                        <div style="color: var(--primary); font-weight: bold;">200 terjual</div>
                        <div style="font-size: 0.8rem; color: #666;">Rp 2.000.000 revenue</div>
                    </div>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="quick-actions" style="background: white; padding: 2rem; border-radius: 8px; box-shadow: var(--shadow); margin: 2rem 0;">
                <h3 style="margin-bottom: 1.5rem;">⚡ Aksi Cepat</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                    <button class="btn" onclick="markAllPendingAsProcessed()" style="display: flex; align-items: center; justify-content: center; gap: 0.5rem; padding: 1rem;">
                        ✅ Proses Semua Pending
                    </button>
                    <button class="btn btn-secondary" onclick="sendDailyReport()" style="display: flex; align-items: center; justify-content: center; gap: 0.5rem; padding: 1rem;">
                        📊 Kirim Laporan Harian
                    </button>
                    <button class="btn btn-secondary" onclick="clearOldOrders()" style="display: flex; align-items: center; justify-content: center; gap: 0.5rem; padding: 1rem;">
                        🗑️ Bersihkan Data Lama
                    </button>
                    <button class="btn btn-secondary" onclick="backupData()" style="display: flex; align-items: center; justify-content: center; gap: 0.5rem; padding: 1rem;">
                        💾 Backup Data
                    </button>
                </div>
            </div>
            
            <div class="orders-table">
                <div style="display: flex; justify-content: space-between; align-items: center; padding: 1.5rem; border-bottom: 1px solid #eee;">
                    <h3 style="margin: 0;">📋 Pesanan Terbaru</h3>
                    <div style="display: flex; gap: 1rem; align-items: center;">
                        <select id="statusFilter" onchange="filterOrdersByStatus(this.value)" style="padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px;">
                            <option value="all">Semua Status</option>
                            <option value="pending">Pending</option>
                            <option value="processing">Diproses</option>
                            <option value="completed">Selesai</option>
                            <option value="cancelled">Dibatalkan</option>
                        </select>
                        <span style="font-size: 0.9rem; color: #666;" id="orderCount">0 pesanan</span>
                    </div>
                </div>
                <div style="overflow-x: auto;">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Order ID</th>
                                <th>Nama</th>
                                <th>Telepon</th>
                                <th>Items</th>
                                <th>Total</th>
                                <th>Status</th>
                                <th>Waktu</th>
                                <th>Aksi</th>
                            </tr>
                        </thead>
                        <tbody id="ordersTableBody">
                            <tr>
                                <td colspan="8" style="text-align: center; color: #666; padding: 2rem;">Belum ada pesanan</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- System Info -->
            <div class="system-info" style="background: #f8f9fa; padding: 1.5rem; border-radius: 8px; margin-top: 2rem; border-left: 4px solid var(--primary);">
                <h4 style="margin-bottom: 1rem; color: var(--primary);">ℹ️ Informasi Sistem</h4>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; font-size: 0.9rem;">
                    <div>
                        <strong>Versi Aplikasi:</strong> v1.0.0
                    </div>
                    <div>
                        <strong>Database:</strong> LocalStorage
                    </div>
                    <div>
                        <strong>Total Menu:</strong> 50 items
                    </div>
                    <div>
                        <strong>Status Server:</strong> <span style="color: var(--success);">● Online</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Menu Detail Modal -->
    <div id="menuModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">Detail Menu</h3>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <img id="modalImage" src="" alt="" style="width: 100%; height: 200px; object-fit: cover; border-radius: 8px; margin-bottom: 1rem;">
                
                <p id="modalDescription"></p>
                
                <div class="form-group">
                    <label for="sizeSelect">Ukuran:</label>
                    <select id="sizeSelect" class="form-control" onchange="updatePrice()">
                        <option value="regular">Regular</option>
                        <option value="large">Large (+Rp 5.000)</option>
                        <option value="jumbo">Jumbo (+Rp 10.000)</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="toppings">Topping Tambahan:</label>
                    <div id="toppings">
                        <label><input type="checkbox" value="keju" onchange="updatePrice()"> Keju (+Rp 3.000)</label><br>
                        <label><input type="checkbox" value="ayam" onchange="updatePrice()"> Ayam (+Rp 5.000)</label><br>
                        <label><input type="checkbox" value="sosis" onchange="updatePrice()"> Sosis (+Rp 4.000)</label><br>
                        <label><input type="checkbox" value="jamur" onchange="updatePrice()"> Jamur (+Rp 2.000)</label>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Jumlah:</label>
                    <div class="quantity-selector">
                        <button type="button" class="qty-btn" onclick="changeQuantity(-1)">-</button>
                        <input type="number" id="quantity" class="qty-input" value="1" min="1" readonly>
                        <button type="button" class="qty-btn" onclick="changeQuantity(1)">+</button>
                    </div>
                </div>
                
                <div class="form-group">
                    <div style="display: flex; justify-content: space-between; align-items: center; font-size: 1.2rem; font-weight: bold;">
                        <span>Total Harga:</span>
                        <span id="modalPrice" class="price">Rp 0</span>
                    </div>
                </div>
                
                <button class="btn" onclick="addToCart()" style="width: 100%;">
                    Tambah ke Keranjang
                </button>
            </div>
        </div>
    </div>

    <!-- Checkout Modal -->
    <div id="checkoutModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Checkout Pesanan</h3>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="checkoutForm" onsubmit="submitOrder(event)">
                    <div class="form-group">
                        <label for="customerName">Nama Lengkap *</label>
                        <input type="text" id="customerName" class="form-control" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="customerPhone">Nomor Telepon *</label>
                        <input type="tel" id="customerPhone" class="form-control" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="customerAddress">Alamat Lengkap *</label>
                        <textarea id="customerAddress" class="form-control" rows="3" required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="paymentMethod">Metode Pembayaran *</label>
                        <select id="paymentMethod" class="form-control" required>
                            <option value="">Pilih metode pembayaran</option>
                            <option value="cod">Bayar di Tempat (COD)</option>
                            <option value="transfer">Transfer Bank</option>
                            <option value="ewallet">E-Wallet</option>
                        </select>
                    </div>
                    
                    <div class="cart-total">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                            <span>Subtotal:</span>
                            <span id="checkoutSubtotal">Rp 0</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                            <span>Ongkos Kirim:</span>
                            <span id="checkoutShipping">Rp 10.000</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; font-weight: bold; font-size: 1.2rem; border-top: 2px solid #ddd; padding-top: 0.5rem;">
                            <span>Total:</span>
                            <span id="checkoutTotal">Rp 0</span>
                        </div>
                    </div>
                    
                    <button type="submit" class="btn" style="width: 100%; margin-top: 1rem;">
                        Pesan Sekarang
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Loading -->
    <div id="loading" class="loading">
        <div class="spinner"></div>
        <p>Memproses pesanan...</p>
    </div>

    <!-- Mobile Navigation -->
    <nav class="mobile-nav">
        <div class="mobile-nav-items">
            <a href="#" onclick="showPage('home')" class="mobile-nav-item active">
                🏠<br>Beranda
            </a>
            <a href="#" onclick="showPage('menu')" class="mobile-nav-item">
                📋<br>Menu
            </a>
            <a href="#" onclick="showPage('cart')" class="mobile-nav-item">
                🛒<br>Keranjang
            </a>
            <a href="#" onclick="showPage('admin')" class="mobile-nav-item">
                👨‍💼<br>Admin
            </a>
        </div>
    </nav>

    <script>
        // Configuration - GANTI PLACEHOLDER INI SEBELUM DEPLOY
        const CONFIG = {
            APPS_SCRIPT_WEBHOOK_URL: '{https://script.google.com/macros/s/AKfycbxxPreGgZSVWOl3beC7h29_47xL8QmfyKzhNAsPzF8pphLcSlQSFzWIFjtj0Fn1IBZOlA/exec}', // Ganti dengan URL Apps Script Web App
            NGIRIMWA_API_KEY: '{NGIRIMWA_API_KEY}', // Ganti dengan API Key NgirimWA
            ADMIN_WHATSAPP: '082225544756'
        };

        // Sample menu data - 50 items
        const menuData = [
            // Makanan Utama
            { id: 1, name: 'Nasi Gudeg Jogja', category: 'utama', price: 25000, image: 'https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?w=400', description: 'Gudeg khas Jogja dengan ayam dan telur' },
            { id: 2, name: 'Rendang Daging Sapi', category: 'utama', price: 35000, image: 'https://images.unsplash.com/photo-1565299507177-b0ac66763828?w=400', description: 'Rendang daging sapi empuk dengan bumbu rempah' },
            { id: 3, name: 'Ayam Bakar Taliwang', category: 'utama', price: 28000, image: 'https://images.unsplash.com/photo-1598515214211-89d3c73ae83b?w=400', description: 'Ayam bakar pedas khas Lombok' },
            { id: 4, name: 'Ikan Bakar Sambal Matah', category: 'utama', price: 32000, image: 'https://images.unsplash.com/photo-1544943910-4c1dc44aab44?w=400', description: 'Ikan bakar segar dengan sambal matah Bali' },
            { id: 5, name: 'Sate Ayam Madura', category: 'utama', price: 22000, image: 'https://images.unsplash.com/photo-1529563021893-cc83c992d75d?w=400', description: 'Sate ayam dengan bumbu kacang khas Madura' },
            { id: 6, name: 'Gado-Gado Jakarta', category: 'utama', price: 18000, image: 'https://images.unsplash.com/photo-1512058564366-18510be2db19?w=400', description: 'Gado-gado segar dengan bumbu kacang' },
            { id: 7, name: 'Rawon Surabaya', category: 'utama', price: 26000, image: 'https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?w=400', description: 'Rawon daging sapi dengan kuah hitam khas' },
            { id: 8, name: 'Soto Betawi', category: 'utama', price: 24000, image: 'https://images.unsplash.com/photo-1565299507177-b0ac66763828?w=400', description: 'Soto Betawi dengan santan dan daging' },
            { id: 9, name: 'Pecel Lele', category: 'utama', price: 15000, image: 'https://images.unsplash.com/photo-1598515214211-89d3c73ae83b?w=400', description: 'Lele goreng dengan sambal pecel' },
            { id: 10, name: 'Nasi Liwet Solo', category: 'utama', price: 20000, image: 'https://images.unsplash.com/photo-1544943910-4c1dc44aab44?w=400', description: 'Nasi liwet dengan lauk pauk khas Solo' },

            // Minuman
            { id: 11, name: 'Es Teh Manis', category: 'minuman', price: 5000, image: 'https://images.unsplash.com/photo-1556679343-c7306c1976bc?w=400', description: 'Es teh manis segar' },
            { id: 12, name: 'Es Jeruk Nipis', category: 'minuman', price: 8000, image: 'https://images.unsplash.com/photo-1621263764928-df1444c5e859?w=400', description: 'Es jeruk nipis segar dan asam' },
            { id: 13, name: 'Jus Alpukat', category: 'minuman', price: 12000, image: 'https://images.unsplash.com/photo-1623065422902-30a2d299bbe4?w=400', description: 'Jus alpukat creamy dengan susu' },
            { id: 14, name: 'Es Cendol', category: 'minuman', price: 10000, image: 'https://images.unsplash.com/photo-1551024506-0bccd828d307?w=400', description: 'Es cendol dengan santan dan gula merah' },
            { id: 15, name: 'Kopi Tubruk', category: 'minuman', price: 7000, image: 'https://images.unsplash.com/photo-1509042239860-f550ce710b93?w=400', description: 'Kopi tubruk hitam pekat' },
            { id: 16, name: 'Teh Tarik', category: 'minuman', price: 9000, image: 'https://images.unsplash.com/photo-1571934811356-5cc061b6821f?w=400', description: 'Teh tarik dengan susu' },
            { id: 17, name: 'Es Kelapa Muda', category: 'minuman', price: 11000, image: 'https://images.unsplash.com/photo-1585032226651-759b368d7246?w=400', description: 'Air kelapa muda segar' },
            { id: 18, name: 'Jus Mangga', category: 'minuman', price: 13000, image: 'https://images.unsplash.com/photo-1623065422902-30a2d299bbe4?w=400', description: 'Jus mangga manis dan segar' },
            { id: 19, name: 'Es Campur', category: 'minuman', price: 14000, image: 'https://images.unsplash.com/photo-1551024506-0bccd828d307?w=400', description: 'Es campur dengan berbagai topping' },
            { id: 20, name: 'Wedang Jahe', category: 'minuman', price: 6000, image: 'https://images.unsplash.com/photo-1571934811356-5cc061b6821f?w=400', description: 'Wedang jahe hangat dan pedas' },

            // Cemilan
            { id: 21, name: 'Keripik Singkong', category: 'cemilan', price: 8000, image: 'https://images.unsplash.com/photo-1621939514649-280e2ee25f60?w=400', description: 'Keripik singkong renyah dan gurih' },
            { id: 22, name: 'Pisang Goreng', category: 'cemilan', price: 10000, image: 'https://images.unsplash.com/photo-1587132137056-bfbf0166836e?w=400', description: 'Pisang goreng crispy dengan tepung' },
            { id: 23, name: 'Tahu Isi', category: 'cemilan', price: 12000, image: 'https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?w=400', description: 'Tahu isi dengan sayuran dan tauge' },
            { id: 24, name: 'Bakwan Jagung', category: 'cemilan', price: 9000, image: 'https://images.unsplash.com/photo-1565299507177-b0ac66763828?w=400', description: 'Bakwan jagung manis dan gurih' },
            { id: 25, name: 'Cireng Bumbu Rujak', category: 'cemilan', price: 11000, image: 'https://images.unsplash.com/photo-1598515214211-89d3c73ae83b?w=400', description: 'Cireng dengan bumbu rujak pedas' },
            { id: 26, name: 'Kerupuk Udang', category: 'cemilan', price: 7000, image: 'https://images.unsplash.com/photo-1544943910-4c1dc44aab44?w=400', description: 'Kerupuk udang renyah dan gurih' },
            { id: 27, name: 'Tempe Mendoan', category: 'cemilan', price: 8500, image: 'https://images.unsplash.com/photo-1529563021893-cc83c992d75d?w=400', description: 'Tempe mendoan khas Purwokerto' },
            { id: 28, name: 'Getuk Lindri', category: 'cemilan', price: 6000, image: 'https://images.unsplash.com/photo-1512058564366-18510be2db19?w=400', description: 'Getuk lindri manis dengan kelapa' },
            { id: 29, name: 'Klepon', category: 'cemilan', price: 9500, image: 'https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?w=400', description: 'Klepon dengan gula merah dan kelapa' },
            { id: 30, name: 'Onde-onde', category: 'cemilan', price: 10500, image: 'https://images.unsplash.com/photo-1565299507177-b0ac66763828?w=400', description: 'Onde-onde isi kacang hijau' },

            // Dessert
            { id: 31, name: 'Es Krim Vanilla', category: 'dessert', price: 15000, image: 'https://images.unsplash.com/photo-1563805042-7684c019e1cb?w=400', description: 'Es krim vanilla premium' },
            { id: 32, name: 'Puding Coklat', category: 'dessert', price: 12000, image: 'https://images.unsplash.com/photo-1488477181946-6428a0291777?w=400', description: 'Puding coklat lembut dan manis' },
            { id: 33, name: 'Fruit Salad', category: 'dessert', price: 18000, image: 'https://images.unsplash.com/photo-1546793665-c74683f339c1?w=400', description: 'Salad buah segar dengan yogurt' },
            { id: 34, name: 'Brownies Coklat', category: 'dessert', price: 16000, image: 'https://images.unsplash.com/photo-1606313564200-e75d5e30476c?w=400', description: 'Brownies coklat fudgy dan lembut' },
            { id: 35, name: 'Pancake Madu', category: 'dessert', price: 20000, image: 'https://images.unsplash.com/photo-1567620905732-2d1ec7ab7445?w=400', description: 'Pancake fluffy dengan madu' },
            { id: 36, name: 'Tiramisu', category: 'dessert', price: 25000, image: 'https://images.unsplash.com/photo-1571877227200-a0d98ea607e9?w=400', description: 'Tiramisu Italia dengan kopi' },
            { id: 37, name: 'Cheesecake Strawberry', category: 'dessert', price: 22000, image: 'https://images.unsplash.com/photo-1565958011703-44f9829ba187?w=400', description: 'Cheesecake dengan topping strawberry' },
            { id: 38, name: 'Donat Glaze', category: 'dessert', price: 8000, image: 'https://images.unsplash.com/photo-1551024506-0bccd828d307?w=400', description: 'Donat dengan glaze manis' },
            { id: 39, name: 'Mochi Ice Cream', category: 'dessert', price: 14000, image: 'https://images.unsplash.com/photo-1563805042-7684c019e1cb?w=400', description: 'Mochi dengan es krim di dalam' },
            { id: 40, name: 'Creme Brulee', category: 'dessert', price: 28000, image: 'https://images.unsplash.com/photo-1488477181946-6428a0291777?w=400', description: 'Creme brulee dengan karamel' },

            // Pizza & Pasta
            { id: 41, name: 'Pizza Margherita', category: 'pizza', price: 45000, image: 'https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?w=400', description: 'Pizza klasik dengan tomat dan keju mozzarella' },
            { id: 42, name: 'Pizza Pepperoni', category: 'pizza', price: 52000, image: 'https://images.unsplash.com/photo-1565299507177-b0ac66763828?w=400', description: 'Pizza dengan pepperoni dan keju' },
            { id: 43, name: 'Spaghetti Bolognese', category: 'pizza', price: 38000, image: 'https://images.unsplash.com/photo-1598515214211-89d3c73ae83b?w=400', description: 'Spaghetti dengan saus daging bolognese' },
            { id: 44, name: 'Fettuccine Alfredo', category: 'pizza', price: 42000, image: 'https://images.unsplash.com/photo-1544943910-4c1dc44aab44?w=400', description: 'Fettuccine dengan saus krim alfredo' },
            { id: 45, name: 'Pizza Hawaiian', category: 'pizza', price: 48000, image: 'https://images.unsplash.com/photo-1529563021893-cc83c992d75d?w=400', description: 'Pizza dengan ham dan nanas' },
            { id: 46, name: 'Lasagna Beef', category: 'pizza', price: 55000, image: 'https://images.unsplash.com/photo-1512058564366-18510be2db19?w=400', description: 'Lasagna dengan daging sapi dan keju' },
            { id: 47, name: 'Carbonara', category: 'pizza', price: 40000, image: 'https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?w=400', description: 'Pasta carbonara dengan bacon dan telur' },
            { id: 48, name: 'Pizza Vegetarian', category: 'pizza', price: 43000, image: 'https://images.unsplash.com/photo-1565299507177-b0ac66763828?w=400', description: 'Pizza dengan berbagai sayuran segar' },
            { id: 49, name: 'Ravioli Spinach', category: 'pizza', price: 46000, image: 'https://images.unsplash.com/photo-1598515214211-89d3c73ae83b?w=400', description: 'Ravioli isi bayam dengan saus tomat' },
            { id: 50, name: 'Pizza Meat Lovers', category: 'pizza', price: 58000, image: 'https://images.unsplash.com/photo-1544943910-4c1dc44aab44?w=400', description: 'Pizza dengan berbagai jenis daging' }
        ];

        // Global variables
        let currentMenu = null;
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        let orders = JSON.parse(localStorage.getItem('orders')) || [];

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });

        function initializeApp() {
            renderMenuFilters();
            renderMenu();
            renderRecommendedMenu();
            updateCartUI();
            updateAdminDashboard();
        }

        // Navigation
        function showPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Show selected page
            document.getElementById(pageId).classList.add('active');
            
            // Update navigation
            document.querySelectorAll('.nav-link, .mobile-nav-item').forEach(link => {
                link.classList.remove('active');
            });
            
            document.querySelectorAll(`[onclick="showPage('${pageId}')"]`).forEach(link => {
                link.classList.add('active');
            });

            // Update cart display when showing cart page
            if (pageId === 'cart') {
                renderCart();
            }
        }

        // Menu functions
        function renderMenuFilters() {
            const categories = ['semua', 'utama', 'minuman', 'cemilan', 'dessert', 'pizza'];
            const categoryNames = {
                'semua': 'Semua',
                'utama': 'Makanan Utama',
                'minuman': 'Minuman',
                'cemilan': 'Cemilan',
                'dessert': 'Dessert',
                'pizza': 'Pizza & Pasta'
            };

            const filtersHTML = categories.map(category => 
                `<button class="filter-btn ${category === 'semua' ? 'active' : ''}" 
                         onclick="filterMenu('${category}')">${categoryNames[category]}</button>`
            ).join('');

            document.getElementById('menuFilters').innerHTML = filtersHTML;
        }

        function filterMenu(category) {
            // Update active filter
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');

            // Filter and render menu
            const filteredMenu = category === 'semua' ? menuData : menuData.filter(item => item.category === category);
            renderMenuGrid(filteredMenu);
            updateMenuStats(filteredMenu.length);
        }

        function searchMenu(query) {
            const searchTerm = query.toLowerCase().trim();
            let filteredMenu = menuData;

            if (searchTerm) {
                filteredMenu = menuData.filter(item => 
                    item.name.toLowerCase().includes(searchTerm) ||
                    item.description.toLowerCase().includes(searchTerm)
                );
            }

            renderMenuGrid(filteredMenu);
            updateMenuStats(filteredMenu.length);
        }

        function updateMenuStats(filteredCount) {
            document.getElementById('filteredMenuCount').textContent = filteredCount;
        }

        function renderMenu() {
            renderMenuGrid(menuData);
        }

        function renderRecommendedMenu() {
            const recommended = menuData.slice(0, 6);
            renderMenuGrid(recommended, 'recommendedMenu');
        }

        function renderMenuGrid(items, containerId = 'menuGrid') {
            const container = document.getElementById(containerId);
            const itemsHTML = items.map(item => `
                <div class="menu-item" onclick="showMenuDetail(${item.id})">
                    <img src="${item.image}" alt="${item.name}" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDQwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI0MDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0yMDAgMTAwTDE2MCA4MEwyMDAgNjBMMjQwIDgwTDIwMCAxMDBaIiBmaWxsPSIjOUI5QjlCIi8+Cjx0ZXh0IHg9IjIwMCIgeT0iMTMwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmaWxsPSIjOUI5QjlCIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiPkdhbWJhciBUaWRhayBUZXJzZWRpYTwvdGV4dD4KPC9zdmc+'; this.alt='Gambar tidak tersedia';">
                    <div class="menu-item-content">
                        <h3>${item.name}</h3>
                        <p>${item.description}</p>
                        <div class="price">${formatCurrency(item.price)}</div>
                        <button class="btn" onclick="event.stopPropagation(); showMenuDetail(${item.id})">
                            Lihat Detail
                        </button>
                    </div>
                </div>
            `).join('');

            container.innerHTML = itemsHTML;
        }

        function showMenuDetail(itemId) {
            currentMenu = menuData.find(item => item.id === itemId);
            if (!currentMenu) return;

            document.getElementById('modalTitle').textContent = currentMenu.name;
            document.getElementById('modalImage').src = currentMenu.image;
            document.getElementById('modalImage').alt = currentMenu.name;
            document.getElementById('modalDescription').textContent = currentMenu.description;
            document.getElementById('quantity').value = 1;
            
            // Reset selections
            document.getElementById('sizeSelect').value = 'regular';
            document.querySelectorAll('#toppings input[type="checkbox"]').forEach(cb => cb.checked = false);
            
            updatePrice();
            document.getElementById('menuModal').classList.add('active');
        }

        function updatePrice() {
            if (!currentMenu) return;

            let price = currentMenu.price;
            
            // Add size price
            const size = document.getElementById('sizeSelect').value;
            if (size === 'large') price += 5000;
            if (size === 'jumbo') price += 10000;
            
            // Add toppings price
            const toppings = document.querySelectorAll('#toppings input[type="checkbox"]:checked');
            toppings.forEach(topping => {
                switch(topping.value) {
                    case 'keju': price += 3000; break;
                    case 'ayam': price += 5000; break;
                    case 'sosis': price += 4000; break;
                    case 'jamur': price += 2000; break;
                }
            });
            
            // Multiply by quantity
            const quantity = parseInt(document.getElementById('quantity').value);
            const totalPrice = price * quantity;
            
            document.getElementById('modalPrice').textContent = formatCurrency(totalPrice);
        }

        function changeQuantity(change) {
            const quantityInput = document.getElementById('quantity');
            let quantity = parseInt(quantityInput.value) + change;
            if (quantity < 1) quantity = 1;
            quantityInput.value = quantity;
            updatePrice();
        }

        function addToCart() {
            if (!currentMenu) return;

            const size = document.getElementById('sizeSelect').value;
            const toppings = Array.from(document.querySelectorAll('#toppings input[type="checkbox"]:checked'))
                .map(cb => cb.value);
            const quantity = parseInt(document.getElementById('quantity').value);

            let price = currentMenu.price;
            if (size === 'large') price += 5000;
            if (size === 'jumbo') price += 10000;
            
            toppings.forEach(topping => {
                switch(topping) {
                    case 'keju': price += 3000; break;
                    case 'ayam': price += 5000; break;
                    case 'sosis': price += 4000; break;
                    case 'jamur': price += 2000; break;
                }
            });

            const cartItem = {
                id: Date.now(),
                menuId: currentMenu.id,
                name: currentMenu.name,
                image: currentMenu.image,
                size: size,
                toppings: toppings,
                quantity: quantity,
                price: price,
                total: price * quantity
            };

            cart.push(cartItem);
            localStorage.setItem('cart', JSON.stringify(cart));
            
            updateCartUI();
            closeModal();
            showNotification('Item berhasil ditambahkan ke keranjang!', 'success');
        }

        // Cart functions
        function updateCartUI() {
            const cartCount = cart.reduce((sum, item) => sum + item.quantity, 0);
            document.getElementById('cartCount').textContent = cartCount;
        }

        function quickAddToCart(menuId) {
            const menuItem = menuData.find(item => item.id === menuId);
            if (!menuItem) return;

            const cartItem = {
                id: Date.now(),
                menuId: menuItem.id,
                name: menuItem.name,
                image: menuItem.image,
                size: 'regular',
                toppings: [],
                quantity: 1,
                price: menuItem.price,
                total: menuItem.price
            };

            cart.push(cartItem);
            localStorage.setItem('cart', JSON.stringify(cart));
            
            updateCartUI();
            renderCart();
            showNotification(`${menuItem.name} ditambahkan ke keranjang!`, 'success');
        }

        function renderCart() {
            const cartItemsContainer = document.getElementById('cartItems');
            const cartTotalContainer = document.getElementById('cartTotal');
            const promoAlert = document.getElementById('promoAlert');
            const shoppingTips = document.getElementById('shoppingTips');
            const recommendedAddons = document.getElementById('recommendedAddons');
            const emptyCartEnhanced = document.getElementById('emptyCartEnhanced');

            if (cart.length === 0) {
                cartItemsContainer.innerHTML = '';
                cartTotalContainer.style.display = 'none';
                promoAlert.style.display = 'none';
                shoppingTips.style.display = 'none';
                recommendedAddons.style.display = 'none';
                emptyCartEnhanced.style.display = 'block';
                return;
            }

            // Hide empty cart message and show content
            emptyCartEnhanced.style.display = 'none';
            shoppingTips.style.display = 'block';
            recommendedAddons.style.display = 'block';

            const cartHTML = cart.map(item => `
                <div class="cart-item">
                    <img src="${item.image}" alt="${item.name}" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjYwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0zMCAzMEwyNCAyNEwzMCAxOEwzNiAyNEwzMCAzMFoiIGZpbGw9IiM5QjlCOUIiLz4KPC9zdmc+'; this.alt='Gambar tidak tersedia';">
                    <div class="cart-item-info">
                        <div class="cart-item-name">${item.name}</div>
                        <div class="cart-item-variant">
                            ${item.size.charAt(0).toUpperCase() + item.size.slice(1)}
                            ${item.toppings.length > 0 ? ' + ' + item.toppings.join(', ') : ''}
                        </div>
                        <div>${formatCurrency(item.price)} x ${item.quantity}</div>
                    </div>
                    <div style="text-align: right;">
                        <div style="font-weight: bold; margin-bottom: 0.5rem;">${formatCurrency(item.total)}</div>
                        <button class="btn" style="background: var(--danger); padding: 0.5rem;" 
                                onclick="removeFromCart(${item.id})">Hapus</button>
                    </div>
                </div>
            `).join('');

            cartItemsContainer.innerHTML = cartHTML;

            // Calculate totals
            const subtotal = cart.reduce((sum, item) => sum + item.total, 0);
            const freeShippingThreshold = 50000;
            const shipping = subtotal >= freeShippingThreshold ? 0 : 10000;
            const total = subtotal + shipping;

            // Show/hide promo alert
            if (subtotal >= freeShippingThreshold) {
                promoAlert.style.display = 'block';
            } else {
                promoAlert.style.display = 'none';
            }

            document.getElementById('subtotal').textContent = formatCurrency(subtotal);
            document.getElementById('shipping').textContent = shipping === 0 ? 'GRATIS!' : formatCurrency(shipping);
            document.getElementById('total').textContent = formatCurrency(total);
            cartTotalContainer.style.display = 'block';
        }

        function removeFromCart(itemId) {
            cart = cart.filter(item => item.id !== itemId);
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartUI();
            renderCart();
            showNotification('Item berhasil dihapus dari keranjang', 'success');
        }

        // Checkout functions
        function showCheckout() {
            if (cart.length === 0) {
                showNotification('Keranjang kosong!', 'error');
                return;
            }

            const subtotal = cart.reduce((sum, item) => sum + item.total, 0);
            const shipping = 10000;
            const total = subtotal + shipping;

            document.getElementById('checkoutSubtotal').textContent = formatCurrency(subtotal);
            document.getElementById('checkoutShipping').textContent = formatCurrency(shipping);
            document.getElementById('checkoutTotal').textContent = formatCurrency(total);

            document.getElementById('checkoutModal').classList.add('active');
        }

        async function submitOrder(event) {
            event.preventDefault();
            
            const form = event.target;
            const formData = new FormData(form);
            
            const customerName = document.getElementById('customerName').value;
            const customerPhone = document.getElementById('customerPhone').value;
            const customerAddress = document.getElementById('customerAddress').value;
            const paymentMethod = document.getElementById('paymentMethod').value;

            if (!customerName || !customerPhone || !customerAddress || !paymentMethod) {
                showNotification('Mohon lengkapi semua field!', 'error');
                return;
            }

            const subtotal = cart.reduce((sum, item) => sum + item.total, 0);
            const shipping = 10000;
            const total = subtotal + shipping;

            const orderId = 'ORD-' + Date.now();
            const orderData = {
                order_id: orderId,
                timestamp: new Date().toISOString(),
                nama: customerName,
                telepon: customerPhone,
                alamat: customerAddress,
                items: cart.map(item => ({
                    id: item.menuId,
                    nama: item.name,
                    varian: `${item.size}${item.toppings.length > 0 ? ' + ' + item.toppings.join(', ') : ''}`,
                    qty: item.quantity,
                    harga: item.price
                })),
                subtotal: subtotal,
                ongkir: shipping,
                total: total,
                metode_pembayaran: paymentMethod,
                status: 'pending'
            };

            showLoading(true);

            try {
                // Submit to Apps Script
                const response = await fetch(CONFIG.APPS_SCRIPT_WEBHOOK_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(orderData)
                });

                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }

                const result = await response.json();
                
                if (result.success) {
                    // Save order locally
                    orders.push(orderData);
                    localStorage.setItem('orders', JSON.stringify(orders));
                    
                    // Clear cart
                    cart = [];
                    localStorage.setItem('cart', JSON.stringify(cart));
                    
                    // Send WhatsApp notification
                    await sendWhatsAppNotification(orderData);
                    
                    // Update UI
                    updateCartUI();
                    updateAdminDashboard();
                    closeModal();
                    showPage('home');
                    
                    showNotification(`Pesanan berhasil! Order ID: ${orderId}`, 'success');
                } else {
                    throw new Error(result.message || 'Gagal memproses pesanan');
                }
            } catch (error) {
                console.error('Order submission error:', error);
                showNotification('Gagal memproses pesanan. Silakan coba lagi.', 'error');
                
                // Fallback: open WhatsApp directly
                openWhatsAppFallback(orderData);
            } finally {
                showLoading(false);
            }
        }

        async function sendWhatsAppNotification(orderData) {
            try {
                const message = createWhatsAppMessage(orderData);
                
                const whatsappData = {
                    api_key: CONFIG.NGIRIMWA_API_KEY,
                    sender: CONFIG.ADMIN_WHATSAPP,
                    number: CONFIG.ADMIN_WHATSAPP,
                    message: message
                };

                const response = await fetch('https://api.ngirimwa.com/send', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(whatsappData)
                });

                if (!response.ok) {
                    throw new Error('WhatsApp API error');
                }

                console.log('WhatsApp notification sent successfully');
            } catch (error) {
                console.error('WhatsApp notification error:', error);
                // Fallback to direct WhatsApp
                openWhatsAppFallback(orderData);
            }
        }

        function createWhatsAppMessage(orderData) {
            const itemsList = orderData.items.map(item => 
                `• ${item.nama} (${item.varian}) - ${item.qty}x ${formatCurrency(item.harga)}`
            ).join('\n');

            return `🍕 *PESANAN BARU - FoodOrder*

📋 *Order ID:* ${orderData.order_id}
👤 *Nama:* ${orderData.nama}
📱 *Telepon:* ${orderData.telepon}
📍 *Alamat:* ${orderData.alamat}

🛒 *Detail Pesanan:*
${itemsList}

💰 *Subtotal:* ${formatCurrency(orderData.subtotal)}
🚚 *Ongkir:* ${formatCurrency(orderData.ongkir)}
💳 *Total:* ${formatCurrency(orderData.total)}
💳 *Pembayaran:* ${orderData.metode_pembayaran}

⏰ *Waktu:* ${new Date(orderData.timestamp).toLocaleString('id-ID')}

Silakan konfirmasi pesanan ini. Terima kasih! 🙏`;
        }

        function openWhatsAppFallback(orderData) {
            const message = createWhatsAppMessage(orderData);
            const encodedMessage = encodeURIComponent(message);
            const whatsappUrl = `https://wa.me/62${CONFIG.ADMIN_WHATSAPP.substring(1)}?text=${encodedMessage}`;
            
            window.open(whatsappUrl, '_blank', 'noopener,noreferrer');
            showNotification('Membuka WhatsApp untuk konfirmasi pesanan...', 'success');
        }

        // Admin functions
        function updateAdminDashboard() {
            const totalOrders = orders.length;
            const totalRevenue = orders.reduce((sum, order) => sum + order.total, 0);
            const pendingOrders = orders.filter(order => order.status === 'pending').length;
            const avgOrderValue = totalOrders > 0 ? totalRevenue / totalOrders : 0;

            document.getElementById('totalOrders').textContent = totalOrders;
            document.getElementById('totalRevenue').textContent = formatCurrency(totalRevenue);
            document.getElementById('pendingOrders').textContent = pendingOrders;
            document.getElementById('avgOrderValue').textContent = formatCurrency(avgOrderValue);
            document.getElementById('lastUpdate').textContent = `Terakhir diperbarui: ${new Date().toLocaleString('id-ID')}`;

            renderOrdersTable();
        }

        function renderOrdersTable() {
            const tableBody = document.getElementById('ordersTableBody');
            const orderCount = document.getElementById('orderCount');
            
            if (orders.length === 0) {
                tableBody.innerHTML = '<tr><td colspan="8" style="text-align: center; color: #666; padding: 2rem;">Belum ada pesanan</td></tr>';
                orderCount.textContent = '0 pesanan';
                return;
            }

            const recentOrders = orders.slice(-20).reverse();
            orderCount.textContent = `${recentOrders.length} pesanan`;
            
            const ordersHTML = recentOrders.map(order => `
                <tr>
                    <td style="font-family: monospace; font-size: 0.9rem;">${order.order_id}</td>
                    <td>${order.nama}</td>
                    <td>${order.telepon}</td>
                    <td style="font-size: 0.9rem;">${order.items.length} item(s)</td>
                    <td style="font-weight: bold;">${formatCurrency(order.total)}</td>
                    <td><span class="status-badge status-${order.status}">${order.status}</span></td>
                    <td style="font-size: 0.9rem;">${new Date(order.timestamp).toLocaleString('id-ID')}</td>
                    <td>
                        <button class="btn" style="padding: 0.25rem 0.5rem; font-size: 0.8rem;" onclick="viewOrderDetails('${order.order_id}')">
                            Detail
                        </button>
                    </td>
                </tr>
            `).join('');

            tableBody.innerHTML = ordersHTML;
        }

        function refreshAdminData() {
            updateAdminDashboard();
            showNotification('Data berhasil diperbarui!', 'success');
        }

        function exportOrders() {
            if (orders.length === 0) {
                showNotification('Tidak ada data untuk diekspor', 'error');
                return;
            }

            const csvContent = "data:text/csv;charset=utf-8," 
                + "Order ID,Nama,Telepon,Alamat,Total,Status,Waktu\n"
                + orders.map(order => 
                    `${order.order_id},"${order.nama}","${order.telepon}","${order.alamat}",${order.total},${order.status},"${new Date(order.timestamp).toLocaleString('id-ID')}"`
                ).join("\n");

            const encodedUri = encodeURI(csvContent);
            const link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", `orders_${new Date().toISOString().split('T')[0]}.csv`);
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            showNotification('Data berhasil diekspor!', 'success');
        }

        function filterByPeriod(period) {
            // Update active filter
            document.querySelectorAll('.time-filter .filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');

            // This is a demo - in real app, you would filter orders by date
            updateAdminDashboard();
            showNotification(`Filter periode: ${period}`, 'success');
        }

        function filterOrdersByStatus(status) {
            // This is a demo - in real app, you would filter the table
            showNotification(`Filter status: ${status}`, 'success');
        }

        function viewOrderDetails(orderId) {
            const order = orders.find(o => o.order_id === orderId);
            if (!order) return;

            const itemsList = order.items.map(item => 
                `• ${item.nama} (${item.varian}) - ${item.qty}x ${formatCurrency(item.harga)}`
            ).join('\n');

            alert(`Detail Pesanan ${orderId}:\n\nNama: ${order.nama}\nTelepon: ${order.telepon}\nAlamat: ${order.alamat}\n\nItems:\n${itemsList}\n\nTotal: ${formatCurrency(order.total)}\nStatus: ${order.status}\nWaktu: ${new Date(order.timestamp).toLocaleString('id-ID')}`);
        }

        function markAllPendingAsProcessed() {
            const pendingCount = orders.filter(order => order.status === 'pending').length;
            if (pendingCount === 0) {
                showNotification('Tidak ada pesanan pending', 'error');
                return;
            }

            orders.forEach(order => {
                if (order.status === 'pending') {
                    order.status = 'processing';
                }
            });

            localStorage.setItem('orders', JSON.stringify(orders));
            updateAdminDashboard();
            showNotification(`${pendingCount} pesanan berhasil diproses!`, 'success');
        }

        function sendDailyReport() {
            showNotification('Laporan harian sedang dikirim...', 'success');
            // Demo function - in real app would send actual report
        }

        function clearOldOrders() {
            const thirtyDaysAgo = new Date();
            thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);
            
            const oldOrdersCount = orders.filter(order => new Date(order.timestamp) < thirtyDaysAgo).length;
            
            if (oldOrdersCount === 0) {
                showNotification('Tidak ada data lama untuk dibersihkan', 'error');
                return;
            }

            if (confirm(`Hapus ${oldOrdersCount} pesanan yang lebih dari 30 hari?`)) {
                orders = orders.filter(order => new Date(order.timestamp) >= thirtyDaysAgo);
                localStorage.setItem('orders', JSON.stringify(orders));
                updateAdminDashboard();
                showNotification(`${oldOrdersCount} pesanan lama berhasil dihapus!`, 'success');
            }
        }

        function backupData() {
            const backupData = {
                orders: orders,
                cart: cart,
                timestamp: new Date().toISOString()
            };

            const dataStr = JSON.stringify(backupData, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            
            const link = document.createElement('a');
            link.href = URL.createObjectURL(dataBlob);
            link.download = `foodorder_backup_${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            showNotification('Backup data berhasil diunduh!', 'success');
        }

        // Utility functions
        function formatCurrency(amount) {
            return new Intl.NumberFormat('id-ID', {
                style: 'currency',
                currency: 'IDR',
                minimumFractionDigits: 0
            }).format(amount);
        }

        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.classList.add('show');
            }, 100);
            
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        function showLoading(show) {
            document.getElementById('loading').style.display = show ? 'block' : 'none';
        }

        function closeModal() {
            document.querySelectorAll('.modal').forEach(modal => {
                modal.classList.remove('active');
            });
        }

        // Event listeners
        document.addEventListener('click', function(event) {
            if (event.target.classList.contains('modal')) {
                closeModal();
            }
        });

        // Error handling for images
        document.addEventListener('error', function(event) {
            if (event.target.tagName === 'IMG') {
                event.target.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDQwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI0MDAiIGhlaWdodD0iMjAwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0yMDAgMTAwTDE2MCA4MEwyMDAgNjBMMjQwIDgwTDIwMCAxMDBaIiBmaWxsPSIjOUI5QjlCIi8+Cjx0ZXh0IHg9IjIwMCIgeT0iMTMwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmaWxsPSIjOUI5QjlCIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiPkdhbWJhciBUaWRhayBUZXJzZWRpYTwvdGV4dD4KPC9zdmc+';
                event.target.alt = 'Gambar tidak tersedia';
            }
        }, true);

        console.log('FoodOrder App initialized successfully!');
        console.log('Jangan lupa ganti placeholder CONFIG sebelum deploy:');
        console.log('- APPS_SCRIPT_WEBHOOK_URL');
        console.log('- NGIRIMWA_API_KEY');
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9882d75f6040fd89',t:'MTc1OTM5Mzg2NC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
