<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FoodOrder - Pesan Makanan Online</title>
    <style>
        body {
            box-sizing: border-box;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: inherit;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header */
        header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1);
        }

        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 2rem;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            color: #667eea;
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 2rem;
        }

        .nav-links a {
            text-decoration: none;
            color: #333;
            font-weight: 500;
            transition: color 0.3s ease;
        }

        .nav-links a:hover, .nav-links a.active {
            color: #667eea;
        }

        .cart-icon {
            position: relative;
            background: #667eea;
            color: white;
            border: none;
            padding: 0.8rem;
            border-radius: 50%;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .cart-icon:hover {
            transform: scale(1.1);
        }

        .cart-count {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #ff4757;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Main Content */
        main {
            margin-top: 80px;
            min-height: calc(100vh - 80px);
        }

        .page {
            display: none;
            padding: 2rem 0;
        }

        .page.active {
            display: block;
        }

        /* Home Page */
        .hero {
            background: linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4));
            background-size: cover;
            background-position: center;
            height: 70vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: white;
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(-45deg, #667eea, #764ba2, #f093fb, #f5576c, #4facfe, #00f2fe);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            z-index: -2;
        }

        .hero::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                radial-gradient(circle at 20% 80%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(255, 255, 255, 0.05) 0%, transparent 50%);
            animation: floatingBubbles 20s ease-in-out infinite;
            z-index: -1;
        }

        .hero-content {
            position: relative;
            z-index: 1;
        }

        .hero-content h1 {
            font-size: 3.5rem;
            margin-bottom: 1rem;
            animation: fadeInUp 1s ease, bounce 2s ease-in-out 2s infinite;
        }

        .hero-content p {
            font-size: 1.2rem;
            margin-bottom: 2rem;
            animation: fadeInUp 1s ease 0.2s both;
        }

        .btn {
            display: inline-block;
            padding: 1rem 2rem;
            background: #667eea;
            color: white;
            text-decoration: none;
            border-radius: 50px;
            font-weight: 600;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            animation: fadeInUp 1s ease 0.4s both;
        }

        .btn:hover {
            background: #5a67d8;
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
            animation: pulse 2s infinite;
        }

        .btn-secondary {
            background: transparent;
            border: 2px solid white;
        }

        .btn-secondary:hover {
            background: white;
            color: #667eea;
        }

        /* Features */
        .features {
            padding: 4rem 0;
            background: white;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .feature-card {
            text-align: center;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-5px);
            animation: pulse 1.5s ease-in-out infinite;
        }

        .feature-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            animation: bounce 3s ease-in-out infinite;
        }

        /* Menu Page */
        .menu-header {
            background: white;
            padding: 2rem 0;
            text-align: center;
        }

        .menu-filters {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin: 2rem 0;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 0.8rem 1.5rem;
            background: white;
            border: 2px solid #667eea;
            color: #667eea;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .filter-btn.active, .filter-btn:hover {
            background: #667eea;
            color: white;
        }

        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 2rem;
            padding: 2rem 0;
        }

        .menu-item {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
            cursor: pointer;
        }

        .menu-item:hover {
            transform: translateY(-5px);
        }

        .menu-item-image {
            width: 100%;
            height: 200px;
            background: linear-gradient(45deg, #f0f0f0, #e0e0e0);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4rem;
            color: #999;
        }

        .menu-item-content {
            padding: 1.5rem;
        }

        .menu-item h3 {
            margin-bottom: 0.5rem;
            color: #333;
        }

        .menu-item-price {
            font-size: 1.2rem;
            font-weight: bold;
            color: #667eea;
            margin: 0.5rem 0;
        }

        .menu-item-description {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 2000;
            animation: fadeIn 0.3s ease;
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            border-radius: 15px;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            animation: slideUp 0.3s ease;
        }

        .modal-header {
            padding: 1.5rem;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #999;
        }

        .modal-body {
            padding: 1.5rem;
        }

        .variant-group {
            margin-bottom: 1.5rem;
        }

        .variant-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .variant-options {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .variant-option {
            padding: 0.5rem 1rem;
            border: 2px solid #ddd;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .variant-option.selected {
            border-color: #667eea;
            background: #667eea;
            color: white;
        }

        .quantity-selector {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .quantity-btn {
            width: 40px;
            height: 40px;
            border: 2px solid #667eea;
            background: white;
            color: #667eea;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .quantity-btn:hover {
            background: #667eea;
            color: white;
        }

        .quantity-display {
            font-size: 1.2rem;
            font-weight: bold;
            min-width: 30px;
            text-align: center;
        }

        /* Cart */
        .cart-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: white;
            border-radius: 10px;
            margin-bottom: 1rem;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .cart-item-image {
            width: 80px;
            height: 80px;
            background: #f0f0f0;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
        }

        .cart-item-details {
            flex: 1;
        }

        .cart-item-name {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .cart-item-variants {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 0.25rem;
        }

        .cart-item-price {
            font-weight: bold;
            color: #667eea;
        }

        .cart-summary {
            background: white;
            padding: 1.5rem;
            border-radius: 15px;
            margin-top: 2rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
        }

        .summary-total {
            border-top: 2px solid #eee;
            padding-top: 1rem;
            margin-top: 1rem;
            font-size: 1.2rem;
            font-weight: bold;
        }

        /* Checkout Form */
        .checkout-form {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 0.8rem;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        /* Admin Dashboard */
        .admin-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: white;
            padding: 1.5rem;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: #667eea;
        }

        .orders-table {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .orders-table table {
            width: 100%;
            border-collapse: collapse;
        }

        .orders-table th,
        .orders-table td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        .orders-table th {
            background: #f8f9fa;
            font-weight: 600;
        }

        /* Loading & Notifications */
        .loading {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            z-index: 3000;
        }

        .loading.active {
            display: block;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }

        .notification {
            position: fixed;
            top: 100px;
            right: 20px;
            padding: 1rem 1.5rem;
            border-radius: 10px;
            color: white;
            font-weight: 600;
            z-index: 3000;
            transform: translateX(400px);
            transition: transform 0.3s ease;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            background: #2ecc71;
        }

        .notification.error {
            background: #e74c3c;
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes gradientShift {
            0% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
            100% {
                background-position: 0% 50%;
            }
        }

        @keyframes floatingBubbles {
            0%, 100% {
                transform: translateY(0px) rotate(0deg);
                opacity: 0.7;
            }
            33% {
                transform: translateY(-20px) rotate(120deg);
                opacity: 0.9;
            }
            66% {
                transform: translateY(-10px) rotate(240deg);
                opacity: 0.8;
            }
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0);
            }
            40% {
                transform: translateY(-10px);
            }
            60% {
                transform: translateY(-5px);
            }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }

            .hero-content h1 {
                font-size: 2.5rem;
            }

            .hero-content p {
                font-size: 1rem;
            }

            .menu-grid {
                grid-template-columns: 1fr;
            }

            .cart-item {
                flex-direction: column;
                text-align: center;
            }

            .quantity-selector {
                justify-content: center;
            }

            .checkout-container {
                grid-template-columns: 1fr !important;
            }

            .cart-summary {
                position: static !important;
            }

            .admin-stats {
                grid-template-columns: repeat(2, 1fr);
            }

            .features-grid {
                grid-template-columns: 1fr;
            }

            .orders-table {
                overflow-x: auto;
            }

            .orders-table table {
                min-width: 600px;
            }

            /* Search controls responsive */
            .menu-header + div > div {
                grid-template-columns: 1fr !important;
                gap: 0.5rem !important;
            }

            .menu-header + div select,
            .menu-header + div button {
                width: 100%;
            }

            /* Modal responsive */
            .modal-content {
                width: 95%;
                margin: 1rem;
            }

            /* Form responsive */
            .form-group input,
            .form-group select,
            .form-group textarea {
                font-size: 16px; /* Prevent zoom on iOS */
            }
        }

        @media (max-width: 480px) {
            .hero-content h1 {
                font-size: 2rem;
            }

            .admin-stats {
                grid-template-columns: 1fr;
            }

            .stat-card {
                padding: 1rem;
            }

            .feature-card {
                padding: 1.5rem;
            }

            .checkout-form {
                padding: 1rem;
            }
        }

        /* Mobile Navigation */
        .mobile-nav {
            display: none;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            border-top: 1px solid #eee;
            padding: 0.5rem;
            z-index: 1000;
        }

        .mobile-nav-items {
            display: flex;
            justify-content: space-around;
        }

        .mobile-nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 0.5rem;
            text-decoration: none;
            color: #666;
            font-size: 0.8rem;
        }

        .mobile-nav-item.active {
            color: #667eea;
        }

        @media (max-width: 768px) {
            .mobile-nav {
                display: block;
            }

            main {
                margin-bottom: 70px;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <nav class="container">
            <div class="logo">🍕 FoodOrder</div>
            <ul class="nav-links">
                <li><a href="#" onclick="showPage('home')" class="active">Beranda</a></li>
                <li><a href="#" onclick="showPage('menu')">Menu</a></li>
                <li><a href="#" onclick="showPage('admin')">Admin</a></li>
            </ul>
            <button class="cart-icon" onclick="showPage('cart')">
                🛒
                <span class="cart-count" id="cartCount">0</span>
            </button>
        </nav>
    </header>

    <!-- Mobile Navigation -->
    <div class="mobile-nav">
        <div class="mobile-nav-items">
            <a href="#" onclick="showPage('home')" class="mobile-nav-item active">
                <span>🏠</span>
                <span>Beranda</span>
            </a>
            <a href="#" onclick="showPage('menu')" class="mobile-nav-item">
                <span>📋</span>
                <span>Menu</span>
            </a>
            <a href="#" onclick="showPage('cart')" class="mobile-nav-item">
                <span>🛒</span>
                <span>Keranjang</span>
            </a>
            <a href="#" onclick="showPage('admin')" class="mobile-nav-item">
                <span>👤</span>
                <span>Admin</span>
            </a>
        </div>
    </div>

    <main>
        <!-- Home Page -->
        <div id="home" class="page active">
            <section class="hero">
                <div class="hero-content">
                    <h1>Pesan Makanan Favorit Anda</h1>
                    <p>Nikmati berbagai pilihan makanan lezat dengan pengiriman cepat ke seluruh Indonesia</p>
                    <div style="margin-top: 2rem;">
                        <a href="#" onclick="showPage('menu')" class="btn">Lihat Menu</a>
                        <a href="#promo" class="btn btn-secondary" style="margin-left: 1rem;">Lihat Promo</a>
                    </div>
                </div>
            </section>

            <!-- Promo Section -->
            <section id="promo" style="padding: 4rem 0; background: white;">
                <div class="container">
                    <h2 style="text-align: center; margin-bottom: 3rem; color: #333;">🎉 Promo Spesial Hari Ini</h2>
                    <div class="features-grid">
                        <div class="feature-card" style="background: linear-gradient(135deg, #ff6b6b, #ee5a52); color: white;">
                            <div class="feature-icon">🔥</div>
                            <h3>Diskon 25%</h3>
                            <p>Untuk pembelian minimal Rp 100.000</p>
                            <small>Kode: HEMAT25</small>
                        </div>
                        <div class="feature-card" style="background: linear-gradient(135deg, #4ecdc4, #44a08d); color: white;">
                            <div class="feature-icon">🚚</div>
                            <h3>Gratis Ongkir</h3>
                            <p>Untuk area Jakarta, Bogor, Depok, Tangerang, Bekasi</p>
                            <small>Min. pembelian Rp 75.000</small>
                        </div>
                        <div class="feature-card" style="background: linear-gradient(135deg, #45b7d1, #96c93d); color: white;">
                            <div class="feature-icon">🎁</div>
                            <h3>Beli 2 Gratis 1</h3>
                            <p>Khusus menu minuman dan dessert</p>
                            <small>Berlaku sampai 31 Desember</small>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Features Section -->
            <section class="features">
                <div class="container">
                    <h2 style="text-align: center; margin-bottom: 2rem;">Mengapa Memilih FoodOrder?</h2>
                    <div class="features-grid">
                        <div class="feature-card">
                            <div class="feature-icon">🚚</div>
                            <h3>Pengiriman Cepat</h3>
                            <p>Makanan sampai dalam 30 menit atau gratis ongkir untuk pesanan berikutnya</p>
                        </div>
                        <div class="feature-card">
                            <div class="feature-icon">🍽️</div>
                            <h3>Kualitas Terjamin</h3>
                            <p>Bahan segar pilihan dan dimasak oleh chef berpengalaman</p>
                        </div>
                        <div class="feature-card">
                            <div class="feature-icon">💳</div>
                            <h3>Pembayaran Mudah</h3>
                            <p>COD, Transfer Bank, E-Wallet, dan berbagai metode lainnya</p>
                        </div>
                        <div class="feature-card">
                            <div class="feature-icon">⭐</div>
                            <h3>Rating Tinggi</h3>
                            <p>Dipercaya lebih dari 10.000+ pelanggan dengan rating 4.8/5</p>
                        </div>
                        <div class="feature-card">
                            <div class="feature-icon">🔒</div>
                            <h3>Aman & Higienis</h3>
                            <p>Standar kebersihan tinggi dan kemasan food grade</p>
                        </div>
                        <div class="feature-card">
                            <div class="feature-icon">📞</div>
                            <h3>Customer Service 24/7</h3>
                            <p>Tim support siap membantu Anda kapan saja</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Popular Menu Section -->
            <section style="padding: 4rem 0; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                <div class="container">
                    <h2 style="text-align: center; margin-bottom: 3rem; color: white;">🔥 Menu Terpopuler</h2>
                    <div class="menu-grid" style="grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));" id="popularMenu">
                        <!-- Popular items will be populated by JavaScript -->
                    </div>
                    <div style="text-align: center; margin-top: 2rem;">
                        <a href="#" onclick="showPage('menu')" class="btn" style="background: white; color: #667eea;">Lihat Semua Menu</a>
                    </div>
                </div>
            </section>

            <!-- Testimonials Section -->
            <section style="padding: 4rem 0; background: white;">
                <div class="container">
                    <h2 style="text-align: center; margin-bottom: 3rem;">💬 Kata Pelanggan</h2>
                    <div class="features-grid">
                        <div class="feature-card">
                            <div style="color: #ffd700; font-size: 1.5rem; margin-bottom: 1rem;">⭐⭐⭐⭐⭐</div>
                            <p style="font-style: italic; margin-bottom: 1rem;">"Makanannya enak banget! Pengiriman juga cepat, pasti order lagi."</p>
                            <strong>- Sarah, Jakarta</strong>
                        </div>
                        <div class="feature-card">
                            <div style="color: #ffd700; font-size: 1.5rem; margin-bottom: 1rem;">⭐⭐⭐⭐⭐</div>
                            <p style="font-style: italic; margin-bottom: 1rem;">"Pelayanan ramah, makanan selalu hangat sampai rumah. Recommended!"</p>
                            <strong>- Budi, Bandung</strong>
                        </div>
                        <div class="feature-card">
                            <div style="color: #ffd700; font-size: 1.5rem; margin-bottom: 1rem;">⭐⭐⭐⭐⭐</div>
                            <p style="font-style: italic; margin-bottom: 1rem;">"Harga terjangkau, porsi besar, rasa mantap. Jadi langganan deh!"</p>
                            <strong>- Siti, Surabaya</strong>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Contact Info Section -->
            <section style="padding: 4rem 0; background: #f8f9fa;">
                <div class="container">
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem;">
                        <div>
                            <h3 style="margin-bottom: 1rem; color: #333;">📍 Lokasi Kami</h3>
                            <p>Jl. Raya Kuliner No. 123<br>Jakarta Selatan 12345<br>Indonesia</p>
                        </div>
                        <div>
                            <h3 style="margin-bottom: 1rem; color: #333;">📞 Hubungi Kami</h3>
                            <p>Telepon: (021) 1234-5678<br>WhatsApp: 0822-2554-4756<br>Email: info@foodorder.com</p>
                        </div>
                        <div>
                            <h3 style="margin-bottom: 1rem; color: #333;">⏰ Jam Operasional</h3>
                            <p>Senin - Minggu<br>08:00 - 22:00 WIB<br>Siap melayani Anda!</p>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Menu Page -->
        <div id="menu" class="page">
            <div class="container">
                <div class="menu-header">
                    <h1>Menu Makanan</h1>
                    <p>Pilih makanan favorit Anda dari 50+ pilihan menu lezat</p>
                </div>

                <!-- Search and Sort Controls -->
                <div style="background: white; padding: 2rem; border-radius: 15px; margin-bottom: 2rem; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
                    <div style="display: grid; grid-template-columns: 1fr auto auto; gap: 1rem; align-items: center;">
                        <div style="position: relative;">
                            <input type="text" id="searchInput" placeholder="Cari menu favorit Anda..." 
                                   style="width: 100%; padding: 0.8rem 1rem 0.8rem 3rem; border: 2px solid #ddd; border-radius: 25px; font-size: 1rem;">
                            <span style="position: absolute; left: 1rem; top: 50%; transform: translateY(-50%); color: #999;">🔍</span>
                        </div>
                        <select id="sortSelect" style="padding: 0.8rem; border: 2px solid #ddd; border-radius: 8px; font-size: 1rem;">
                            <option value="name">Urutkan: Nama A-Z</option>
                            <option value="price-low">Harga: Rendah ke Tinggi</option>
                            <option value="price-high">Harga: Tinggi ke Rendah</option>
                            <option value="rating">Rating Tertinggi</option>
                            <option value="popular">Paling Populer</option>
                        </select>
                        <button onclick="clearFilters()" style="padding: 0.8rem 1.5rem; background: #667eea; color: white; border: none; border-radius: 8px; cursor: pointer;">
                            Reset Filter
                        </button>
                    </div>
                </div>

                <div class="menu-filters">
                    <button class="filter-btn active" onclick="filterMenu('all')">Semua (50)</button>
                    <button class="filter-btn" onclick="filterMenu('makanan-utama')">Makanan Utama (15)</button>
                    <button class="filter-btn" onclick="filterMenu('minuman')">Minuman (10)</button>
                    <button class="filter-btn" onclick="filterMenu('dessert')">Dessert (10)</button>
                    <button class="filter-btn" onclick="filterMenu('snack')">Snack (15)</button>
                </div>

                <!-- Menu Stats -->
                <div style="text-align: center; margin: 1rem 0; color: white;">
                    <span id="menuCount">Menampilkan 50 menu</span>
                </div>

                <div class="menu-grid" id="menuGrid">
                    <!-- Menu items will be populated by JavaScript -->
                </div>

                <!-- Load More Button -->
                <div style="text-align: center; margin-top: 2rem;" id="loadMoreContainer">
                    <button class="btn" onclick="loadMoreItems()" id="loadMoreBtn" style="display: none;">
                        Muat Lebih Banyak Menu
                    </button>
                </div>
            </div>
        </div>

        <!-- Cart Page -->
        <div id="cart" class="page">
            <div class="container">
                <h1 style="text-align: center; margin-bottom: 2rem; color: white;">🛒 Keranjang Belanja</h1>
                
                <!-- Cart Header Info -->
                <div style="background: rgba(255,255,255,0.1); padding: 1rem; border-radius: 10px; margin-bottom: 2rem; text-align: center; color: white;" id="cartHeader">
                    <p>💡 <strong>Tips:</strong> Tambah item senilai <span id="freeShippingRemaining">Rp 65.000</span> lagi untuk mendapat gratis ongkir!</p>
                </div>

                <div id="cartItems">
                    <!-- Cart items will be populated by JavaScript -->
                </div>

                <div class="cart-summary" id="cartSummary" style="display: none;">
                    <!-- Promo Code Section -->
                    <div style="margin-bottom: 1.5rem; padding: 1rem; background: #f8f9fa; border-radius: 10px;">
                        <h4 style="margin-bottom: 1rem;">🎫 Kode Promo</h4>
                        <div style="display: flex; gap: 0.5rem;">
                            <input type="text" id="promoCode" placeholder="Masukkan kode promo" 
                                   style="flex: 1; padding: 0.8rem; border: 2px solid #ddd; border-radius: 8px;">
                            <button onclick="applyPromoCode()" style="padding: 0.8rem 1.5rem; background: #28a745; color: white; border: none; border-radius: 8px; cursor: pointer;">
                                Gunakan
                            </button>
                        </div>
                        <div id="promoMessage" style="margin-top: 0.5rem; font-size: 0.9rem;"></div>
                        
                        <!-- Available Promos -->
                        <div style="margin-top: 1rem;">
                            <small style="color: #666;">Kode tersedia:</small>
                            <div style="display: flex; gap: 0.5rem; margin-top: 0.5rem; flex-wrap: wrap;">
                                <span onclick="document.getElementById('promoCode').value='HEMAT25'" 
                                      style="background: #667eea; color: white; padding: 0.25rem 0.5rem; border-radius: 15px; font-size: 0.8rem; cursor: pointer;">
                                    HEMAT25
                                </span>
                                <span onclick="document.getElementById('promoCode').value='GRATIS10'" 
                                      style="background: #28a745; color: white; padding: 0.25rem 0.5rem; border-radius: 15px; font-size: 0.8rem; cursor: pointer;">
                                    GRATIS10
                                </span>
                                <span onclick="document.getElementById('promoCode').value='NEWUSER'" 
                                      style="background: #ffc107; color: black; padding: 0.25rem 0.5rem; border-radius: 15px; font-size: 0.8rem; cursor: pointer;">
                                    NEWUSER
                                </span>
                            </div>
                        </div>
                    </div>

                    <!-- Order Summary -->
                    <div class="summary-row">
                        <span>Subtotal (<span id="itemCount">0</span> item):</span>
                        <span id="subtotal">Rp 0</span>
                    </div>
                    <div class="summary-row" id="discountRow" style="display: none;">
                        <span>Diskon:</span>
                        <span id="discount" style="color: #28a745;">-Rp 0</span>
                    </div>
                    <div class="summary-row">
                        <span>Ongkos Kirim:</span>
                        <span id="shipping">Rp 10.000</span>
                    </div>
                    <div class="summary-row" style="border-top: 1px solid #eee; padding-top: 0.5rem; margin-top: 0.5rem;">
                        <span>Estimasi Waktu:</span>
                        <span style="color: #28a745;">25-35 menit</span>
                    </div>
                    <div class="summary-row summary-total">
                        <span>Total Pembayaran:</span>
                        <span id="total">Rp 0</span>
                    </div>
                    
                    <!-- Action Buttons -->
                    <div style="display: grid; grid-template-columns: 1fr 2fr; gap: 1rem; margin-top: 1rem;">
                        <button onclick="showPage('menu')" style="padding: 1rem; background: transparent; border: 2px solid #667eea; color: #667eea; border-radius: 8px; cursor: pointer;">
                            Tambah Menu
                        </button>
                        <button class="btn" onclick="showPage('checkout')">
                            Lanjut ke Checkout
                        </button>
                    </div>
                </div>

                <div id="emptyCart" style="text-align: center; color: white; padding: 3rem;">
                    <div style="font-size: 4rem; margin-bottom: 1rem;">🛒</div>
                    <h3>Keranjang Anda Masih Kosong</h3>
                    <p style="margin: 1rem 0;">Yuk, pilih makanan lezat dari menu kami!</p>
                    <a href="#" onclick="showPage('menu')" class="btn" style="margin-top: 1rem;">
                        🍽️ Lihat Menu
                    </a>
                    
                    <!-- Recommended Items -->
                    <div style="margin-top: 3rem;">
                        <h4 style="margin-bottom: 1rem;">💡 Rekomendasi Untuk Anda</h4>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;" id="recommendedItems">
                            <!-- Will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Checkout Page -->
        <div id="checkout" class="page">
            <div class="container">
                <h1 style="text-align: center; margin-bottom: 2rem; color: white;">💳 Checkout Pesanan</h1>
                
                <!-- Progress Steps -->
                <div style="background: white; padding: 1rem; border-radius: 15px; margin-bottom: 2rem;">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="display: flex; align-items: center; color: #28a745;">
                            <span style="background: #28a745; color: white; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 0.5rem;">✓</span>
                            <span>Pilih Menu</span>
                        </div>
                        <div style="flex: 1; height: 2px; background: #28a745; margin: 0 1rem;"></div>
                        <div style="display: flex; align-items: center; color: #667eea;">
                            <span style="background: #667eea; color: white; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 0.5rem;">2</span>
                            <span>Checkout</span>
                        </div>
                        <div style="flex: 1; height: 2px; background: #ddd; margin: 0 1rem;"></div>
                        <div style="display: flex; align-items: center; color: #999;">
                            <span style="background: #ddd; color: #666; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 0.5rem;">3</span>
                            <span>Selesai</span>
                        </div>
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 400px; gap: 2rem;" class="checkout-container">
                    <!-- Form Section -->
                    <div class="checkout-form">
                        <form id="checkoutForm">
                            <!-- Customer Information -->
                            <div style="margin-bottom: 2rem;">
                                <h3 style="margin-bottom: 1rem; color: #333; display: flex; align-items: center;">
                                    👤 Informasi Pemesan
                                </h3>
                                <div class="form-group">
                                    <label for="customerName">Nama Lengkap *</label>
                                    <input type="text" id="customerName" name="customerName" required 
                                           placeholder="Masukkan nama lengkap Anda">
                                </div>
                                <div class="form-group">
                                    <label for="customerPhone">Nomor Telepon *</label>
                                    <input type="tel" id="customerPhone" name="customerPhone" required 
                                           placeholder="08xxxxxxxxxx">
                                </div>
                                <div class="form-group">
                                    <label for="customerEmail">Email (Opsional)</label>
                                    <input type="email" id="customerEmail" name="customerEmail" 
                                           placeholder="email@example.com">
                                </div>
                            </div>

                            <!-- Delivery Information -->
                            <div style="margin-bottom: 2rem;">
                                <h3 style="margin-bottom: 1rem; color: #333; display: flex; align-items: center;">
                                    🚚 Informasi Pengiriman
                                </h3>
                                <div class="form-group">
                                    <label for="deliveryType">Jenis Pengiriman *</label>
                                    <select id="deliveryType" name="deliveryType" required onchange="updateDeliveryOptions()">
                                        <option value="">Pilih jenis pengiriman</option>
                                        <option value="delivery">Antar ke Alamat (Rp 10.000)</option>
                                        <option value="pickup">Ambil di Tempat (Gratis)</option>
                                    </select>
                                </div>
                                <div class="form-group" id="addressGroup">
                                    <label for="customerAddress">Alamat Lengkap *</label>
                                    <textarea id="customerAddress" name="customerAddress" rows="3" required
                                              placeholder="Jalan, No. Rumah, RT/RW, Kelurahan, Kecamatan, Kota"></textarea>
                                </div>
                                <div class="form-group" id="deliveryTimeGroup">
                                    <label for="deliveryTime">Waktu Pengiriman *</label>
                                    <select id="deliveryTime" name="deliveryTime" required>
                                        <option value="">Pilih waktu pengiriman</option>
                                        <option value="asap">Sekarang (25-35 menit)</option>
                                        <option value="scheduled">Jadwalkan Pengiriman</option>
                                    </select>
                                </div>
                                <div class="form-group" id="scheduledTimeGroup" style="display: none;">
                                    <label for="scheduledTime">Pilih Waktu</label>
                                    <input type="datetime-local" id="scheduledTime" name="scheduledTime">
                                </div>
                            </div>

                            <!-- Payment Information -->
                            <div style="margin-bottom: 2rem;">
                                <h3 style="margin-bottom: 1rem; color: #333; display: flex; align-items: center;">
                                    💳 Metode Pembayaran
                                </h3>
                                <div class="form-group">
                                    <div style="display: grid; gap: 0.5rem;">
                                        <label style="display: flex; align-items: center; padding: 1rem; border: 2px solid #ddd; border-radius: 8px; cursor: pointer;" onclick="selectPayment('cod')">
                                            <input type="radio" name="paymentMethod" value="cod" style="margin-right: 1rem;">
                                            <div>
                                                <strong>💵 Bayar di Tempat (COD)</strong>
                                                <div style="font-size: 0.9rem; color: #666;">Bayar tunai saat makanan tiba</div>
                                            </div>
                                        </label>
                                        <label style="display: flex; align-items: center; padding: 1rem; border: 2px solid #ddd; border-radius: 8px; cursor: pointer;" onclick="selectPayment('transfer')">
                                            <input type="radio" name="paymentMethod" value="transfer" style="margin-right: 1rem;">
                                            <div>
                                                <strong>🏦 Transfer Bank</strong>
                                                <div style="font-size: 0.9rem; color: #666;">BCA, Mandiri, BNI, BRI</div>
                                            </div>
                                        </label>
                                        <label style="display: flex; align-items: center; padding: 1rem; border: 2px solid #ddd; border-radius: 8px; cursor: pointer;" onclick="selectPayment('ewallet')">
                                            <input type="radio" name="paymentMethod" value="ewallet" style="margin-right: 1rem;">
                                            <div>
                                                <strong>📱 E-Wallet</strong>
                                                <div style="font-size: 0.9rem; color: #666;">GoPay, OVO, DANA, ShopeePay</div>
                                            </div>
                                        </label>
                                    </div>
                                </div>
                            </div>

                            <!-- Additional Notes -->
                            <div style="margin-bottom: 2rem;">
                                <h3 style="margin-bottom: 1rem; color: #333; display: flex; align-items: center;">
                                    📝 Catatan Tambahan
                                </h3>
                                <div class="form-group">
                                    <label for="notes">Catatan untuk Penjual (Opsional)</label>
                                    <textarea id="notes" name="notes" rows="3" 
                                              placeholder="Contoh: Jangan terlalu pedas, tambah sambal, dll."></textarea>
                                </div>
                            </div>
                        </form>
                    </div>

                    <!-- Order Summary Sidebar -->
                    <div class="cart-summary" style="height: fit-content; position: sticky; top: 100px;">
                        <h3 style="margin-bottom: 1rem;">📋 Ringkasan Pesanan</h3>
                        
                        <!-- Order Items -->
                        <div id="checkoutItems" style="max-height: 300px; overflow-y: auto; margin-bottom: 1rem;">
                            <!-- Items will be populated by JavaScript -->
                        </div>

                        <!-- Promo Code -->
                        <div style="margin-bottom: 1rem; padding: 1rem; background: #f8f9fa; border-radius: 8px;">
                            <div style="display: flex; gap: 0.5rem;">
                                <input type="text" id="checkoutPromoCode" placeholder="Kode promo" 
                                       style="flex: 1; padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px; font-size: 0.9rem;">
                                <button type="button" onclick="applyCheckoutPromo()" 
                                        style="padding: 0.5rem 1rem; background: #28a745; color: white; border: none; border-radius: 4px; font-size: 0.9rem;">
                                    Gunakan
                                </button>
                            </div>
                        </div>

                        <!-- Price Breakdown -->
                        <div class="summary-row">
                            <span>Subtotal (<span id="checkoutItemCount">0</span> item):</span>
                            <span id="checkoutSubtotal">Rp 0</span>
                        </div>
                        <div class="summary-row" id="checkoutDiscountRow" style="display: none;">
                            <span>Diskon:</span>
                            <span id="checkoutDiscount" style="color: #28a745;">-Rp 0</span>
                        </div>
                        <div class="summary-row">
                            <span>Ongkos Kirim:</span>
                            <span id="checkoutShipping">Rp 10.000</span>
                        </div>
                        <div class="summary-row" style="border-top: 1px solid #eee; padding-top: 0.5rem; margin-top: 0.5rem;">
                            <span>Estimasi Tiba:</span>
                            <span id="estimatedTime" style="color: #28a745;">25-35 menit</span>
                        </div>
                        <div class="summary-row summary-total">
                            <span>Total Pembayaran:</span>
                            <span id="checkoutTotal">Rp 0</span>
                        </div>

                        <!-- Action Buttons -->
                        <div style="margin-top: 1.5rem;">
                            <button type="button" onclick="showPage('cart')" 
                                    style="width: 100%; padding: 0.8rem; background: transparent; border: 2px solid #667eea; color: #667eea; border-radius: 8px; cursor: pointer; margin-bottom: 0.5rem;">
                                ← Kembali ke Keranjang
                            </button>
                            <button type="submit" form="checkoutForm" class="btn" style="width: 100%;">
                                🛒 Konfirmasi Pesanan
                            </button>
                        </div>

                        <!-- Security Info -->
                        <div style="margin-top: 1rem; padding: 0.8rem; background: #e8f5e8; border-radius: 8px; font-size: 0.9rem;">
                            <div style="display: flex; align-items: center; color: #28a745;">
                                <span style="margin-right: 0.5rem;">🔒</span>
                                <span>Transaksi Anda aman dan terlindungi</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Admin Dashboard -->
        <div id="admin" class="page">
            <div class="container">
                <h1 style="text-align: center; margin-bottom: 2rem; color: white;">📊 Dashboard Admin</h1>
                
                <!-- Quick Actions -->
                <div style="background: white; padding: 1.5rem; border-radius: 15px; margin-bottom: 2rem; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                        <h3>⚡ Aksi Cepat</h3>
                        <span style="background: #28a745; color: white; padding: 0.25rem 0.8rem; border-radius: 15px; font-size: 0.8rem;">
                            🟢 Online
                        </span>
                    </div>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                        <button onclick="refreshDashboard()" style="padding: 1rem; background: #667eea; color: white; border: none; border-radius: 8px; cursor: pointer;">
                            🔄 Refresh Data
                        </button>
                        <button onclick="exportOrders()" style="padding: 1rem; background: #28a745; color: white; border: none; border-radius: 8px; cursor: pointer;">
                            📊 Export Laporan
                        </button>
                        <button onclick="showNotification('Fitur dalam pengembangan', 'info')" style="padding: 1rem; background: #ffc107; color: black; border: none; border-radius: 8px; cursor: pointer;">
                            📧 Kirim Notifikasi
                        </button>
                        <button onclick="toggleStoreStatus()" style="padding: 1rem; background: #dc3545; color: white; border: none; border-radius: 8px; cursor: pointer;">
                            🏪 Tutup Toko
                        </button>
                    </div>
                </div>

                <!-- Statistics Cards -->
                <div class="admin-stats">
                    <div class="stat-card">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                            <span style="font-size: 2rem;">📦</span>
                            <span style="background: #e3f2fd; color: #1976d2; padding: 0.25rem 0.5rem; border-radius: 12px; font-size: 0.8rem;">
                                +12% hari ini
                            </span>
                        </div>
                        <div class="stat-number" id="totalOrders">0</div>
                        <div>Total Pesanan</div>
                    </div>
                    <div class="stat-card">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                            <span style="font-size: 2rem;">💰</span>
                            <span style="background: #e8f5e9; color: #388e3c; padding: 0.25rem 0.5rem; border-radius: 12px; font-size: 0.8rem;">
                                +8% minggu ini
                            </span>
                        </div>
                        <div class="stat-number" id="totalRevenue">Rp 0</div>
                        <div>Total Pendapatan</div>
                    </div>
                    <div class="stat-card">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                            <span style="font-size: 2rem;">⏳</span>
                            <span style="background: #fff3e0; color: #f57c00; padding: 0.25rem 0.5rem; border-radius: 12px; font-size: 0.8rem;">
                                Perlu perhatian
                            </span>
                        </div>
                        <div class="stat-number" id="pendingOrders">0</div>
                        <div>Pesanan Pending</div>
                    </div>
                    <div class="stat-card">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                            <span style="font-size: 2rem;">👥</span>
                            <span style="background: #f3e5f5; color: #7b1fa2; padding: 0.25rem 0.5rem; border-radius: 12px; font-size: 0.8rem;">
                                +5 baru
                            </span>
                        </div>
                        <div class="stat-number" id="totalCustomers">0</div>
                        <div>Total Pelanggan</div>
                    </div>
                </div>

                <!-- Charts Section -->
                <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 2rem; margin-bottom: 2rem;">
                    <!-- Sales Chart -->
                    <div style="background: white; padding: 1.5rem; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
                        <h3 style="margin-bottom: 1rem;">📈 Penjualan 7 Hari Terakhir</h3>
                        <div style="height: 200px; background: linear-gradient(45deg, #f0f0f0, #e0e0e0); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: #666;">
                            <div style="text-align: center;">
                                <div style="font-size: 3rem; margin-bottom: 0.5rem;">📊</div>
                                <div>Grafik Penjualan</div>
                                <small>(Simulasi - Integrasi Chart.js untuk implementasi nyata)</small>
                            </div>
                        </div>
                    </div>

                    <!-- Top Menu -->
                    <div style="background: white; padding: 1.5rem; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
                        <h3 style="margin-bottom: 1rem;">🔥 Menu Terpopuler</h3>
                        <div id="topMenuItems">
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 0.8rem 0; border-bottom: 1px solid #eee;">
                                <div>
                                    <div style="font-weight: 600;">🍛 Nasi Gudeg</div>
                                    <small style="color: #666;">45 pesanan</small>
                                </div>
                                <div style="background: #28a745; color: white; padding: 0.25rem 0.5rem; border-radius: 12px; font-size: 0.8rem;">
                                    #1
                                </div>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 0.8rem 0; border-bottom: 1px solid #eee;">
                                <div>
                                    <div style="font-weight: 600;">🍖 Rendang</div>
                                    <small style="color: #666;">38 pesanan</small>
                                </div>
                                <div style="background: #ffc107; color: black; padding: 0.25rem 0.5rem; border-radius: 12px; font-size: 0.8rem;">
                                    #2
                                </div>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 0.8rem 0;">
                                <div>
                                    <div style="font-weight: 600;">🍗 Ayam Bakar</div>
                                    <small style="color: #666;">32 pesanan</small>
                                </div>
                                <div style="background: #fd7e14; color: white; padding: 0.25rem 0.5rem; border-radius: 12px; font-size: 0.8rem;">
                                    #3
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Recent Orders Table -->
                <div class="orders-table">
                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 1.5rem; background: white; border-radius: 15px 15px 0 0;">
                        <h3>📋 Pesanan Terbaru</h3>
                        <div style="display: flex; gap: 0.5rem;">
                            <select id="orderFilter" onchange="filterOrders()" style="padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px;">
                                <option value="all">Semua Status</option>
                                <option value="pending">Pending</option>
                                <option value="processing">Diproses</option>
                                <option value="completed">Selesai</option>
                                <option value="cancelled">Dibatalkan</option>
                            </select>
                            <button onclick="refreshOrders()" style="padding: 0.5rem 1rem; background: #667eea; color: white; border: none; border-radius: 4px; cursor: pointer;">
                                🔄 Refresh
                            </button>
                        </div>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>Order ID</th>
                                <th>Pelanggan</th>
                                <th>Items</th>
                                <th>Total</th>
                                <th>Status</th>
                                <th>Waktu</th>
                                <th>Aksi</th>
                            </tr>
                        </thead>
                        <tbody id="ordersTableBody">
                            <!-- Orders will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>

                <!-- System Info -->
                <div style="background: white; padding: 1.5rem; border-radius: 15px; margin-top: 2rem; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
                    <h3 style="margin-bottom: 1rem;">ℹ️ Informasi Sistem</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
                        <div>
                            <strong>📅 Terakhir Update:</strong><br>
                            <span id="lastUpdate">-</span>
                        </div>
                        <div>
                            <strong>🌐 Status Server:</strong><br>
                            <span style="color: #28a745;">🟢 Online</span>
                        </div>
                        <div>
                            <strong>📊 Database:</strong><br>
                            <span style="color: #28a745;">🟢 Terhubung</span>
                        </div>
                        <div>
                            <strong>📱 WhatsApp API:</strong><br>
                            <span style="color: #28a745;">🟢 Aktif</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Modal for Menu Item Details -->
    <div id="menuModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">Detail Menu</h3>
                <button class="close-modal" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div id="modalImage" class="menu-item-image" style="margin-bottom: 1rem;"></div>
                <p id="modalDescription"></p>
                <div id="modalPrice" class="menu-item-price"></div>
                
                <div id="modalVariants">
                    <!-- Variants will be populated by JavaScript -->
                </div>

                <div class="quantity-selector">
                    <button type="button" class="quantity-btn" onclick="changeQuantity(-1)">-</button>
                    <span class="quantity-display" id="modalQuantity">1</span>
                    <button type="button" class="quantity-btn" onclick="changeQuantity(1)">+</button>
                </div>

                <button class="btn" style="width: 100%; margin-top: 1rem;" onclick="addToCart()">
                    Tambah ke Keranjang
                </button>
            </div>
        </div>
    </div>

    <!-- Loading Indicator -->
    <div id="loading" class="loading">
        <div class="spinner"></div>
        <div>Memproses pesanan...</div>
    </div>

    <!-- Notification -->
    <div id="notification" class="notification">
        <span id="notificationText"></span>
    </div>

    <script>
        // Configuration - Replace these with your actual values
        const CONFIG = {
            APPS_SCRIPT_WEBHOOK_URL: '{APPS_SCRIPT_WEBHOOK_URL}', // Replace with your Apps Script Web App URL
            NGIRIMWA_API_KEY: '{NGIRIMWA_API_KEY}', // Replace with your NgirimWA API key
            ADMIN_WHATSAPP: '082225544756'
        };

        // Menu Data - 50 items across categories with ratings and popularity
        const menuData = [
            // Makanan Utama
            { id: 1, name: 'Nasi Gudeg Jogja', category: 'makanan-utama', price: 25000, image: '🍛', description: 'Nasi gudeg khas Jogja dengan ayam dan telur', rating: 4.8, reviews: 456, orders: 1247 },
            { id: 2, name: 'Rendang Daging Sapi', category: 'makanan-utama', price: 35000, image: '🍖', description: 'Rendang daging sapi empuk dengan bumbu rempah', rating: 4.9, reviews: 389, orders: 1156 },
            { id: 3, name: 'Ayam Bakar Taliwang', category: 'makanan-utama', price: 28000, image: '🍗', description: 'Ayam bakar pedas khas Lombok', rating: 4.7, reviews: 298, orders: 987 },
            { id: 4, name: 'Ikan Bakar Sambal Matah', category: 'makanan-utama', price: 32000, image: '🐟', description: 'Ikan bakar dengan sambal matah khas Bali', rating: 4.6, reviews: 234, orders: 876 },
            { id: 5, name: 'Soto Ayam Lamongan', category: 'makanan-utama', price: 18000, image: '🍜', description: 'Soto ayam kuah bening dengan telur dan kerupuk', rating: 4.5, reviews: 345, orders: 1089 },
            { id: 6, name: 'Gado-gado Jakarta', category: 'makanan-utama', price: 20000, image: '🥗', description: 'Gado-gado dengan bumbu kacang kental', rating: 4.4, reviews: 267, orders: 743 },
            { id: 7, name: 'Rawon Surabaya', category: 'makanan-utama', price: 22000, image: '🍲', description: 'Rawon daging sapi kuah hitam khas Surabaya', rating: 4.6, reviews: 198, orders: 654 },
            { id: 8, name: 'Pecel Lele', category: 'makanan-utama', price: 15000, image: '🐟', description: 'Lele goreng dengan sambal dan lalapan', rating: 4.3, reviews: 412, orders: 1345 },
            { id: 9, name: 'Nasi Padang Komplit', category: 'makanan-utama', price: 30000, image: '🍛', description: 'Nasi dengan rendang, ayam pop, dan sayur', rating: 4.7, reviews: 356, orders: 923 },
            { id: 10, name: 'Bakso Malang', category: 'makanan-utama', price: 16000, image: '🍜', description: 'Bakso daging sapi dengan mie dan pangsit', rating: 4.5, reviews: 423, orders: 1234 },
            { id: 11, name: 'Nasi Liwet Solo', category: 'makanan-utama', price: 24000, image: '🍛', description: 'Nasi liwet dengan ayam suwir dan sambal', rating: 4.4, reviews: 189, orders: 567 },
            { id: 12, name: 'Pempek Palembang', category: 'makanan-utama', price: 19000, image: '🍤', description: 'Pempek kapal selam dengan kuah cuko', rating: 4.6, reviews: 278, orders: 789 },
            { id: 13, name: 'Mie Ayam Bakso', category: 'makanan-utama', price: 17000, image: '🍜', description: 'Mie ayam dengan bakso dan pangsit goreng', rating: 4.4, reviews: 367, orders: 1098 },
            { id: 14, name: 'Nasi Kuning Manado', category: 'makanan-utama', price: 26000, image: '🍛', description: 'Nasi kuning dengan ayam rica-rica', rating: 4.5, reviews: 156, orders: 432 },
            { id: 15, name: 'Sate Ayam Madura', category: 'makanan-utama', price: 21000, image: '🍢', description: 'Sate ayam dengan bumbu kacang khas Madura', rating: 4.7, reviews: 298, orders: 876 },

            // Minuman
            { id: 16, name: 'Es Teh Manis', category: 'minuman', price: 5000, image: '🧊', description: 'Es teh manis segar', rating: 4.2, reviews: 567, orders: 2134 },
            { id: 17, name: 'Es Jeruk Nipis', category: 'minuman', price: 8000, image: '🍋', description: 'Es jeruk nipis segar', rating: 4.3, reviews: 234, orders: 876 },
            { id: 18, name: 'Jus Alpukat', category: 'minuman', price: 12000, image: '🥑', description: 'Jus alpukat creamy dengan susu', rating: 4.6, reviews: 189, orders: 543 },
            { id: 19, name: 'Es Cendol', category: 'minuman', price: 10000, image: '🍧', description: 'Es cendol dengan santan dan gula merah', rating: 4.5, reviews: 298, orders: 765 },
            { id: 20, name: 'Kopi Tubruk', category: 'minuman', price: 7000, image: '☕', description: 'Kopi tubruk hitam tradisional', rating: 4.4, reviews: 345, orders: 987 },
            { id: 21, name: 'Teh Tarik', category: 'minuman', price: 9000, image: '🫖', description: 'Teh tarik dengan susu kental manis', rating: 4.3, reviews: 167, orders: 432 },
            { id: 22, name: 'Es Kelapa Muda', category: 'minuman', price: 11000, image: '🥥', description: 'Air kelapa muda segar', rating: 4.4, reviews: 123, orders: 345 },
            { id: 23, name: 'Jus Mangga', category: 'minuman', price: 13000, image: '🥭', description: 'Jus mangga manis segar', rating: 4.5, reviews: 156, orders: 456 },
            { id: 24, name: 'Es Campur', category: 'minuman', price: 14000, image: '🍧', description: 'Es campur dengan berbagai topping', rating: 4.3, reviews: 198, orders: 567 },
            { id: 25, name: 'Wedang Jahe', category: 'minuman', price: 6000, image: '🫖', description: 'Minuman jahe hangat tradisional', rating: 4.1, reviews: 89, orders: 234 },

            // Dessert
            { id: 26, name: 'Es Krim Vanilla', category: 'dessert', price: 15000, image: '🍦', description: 'Es krim vanilla premium', rating: 4.6, reviews: 234, orders: 678 },
            { id: 27, name: 'Puding Coklat', category: 'dessert', price: 12000, image: '🍮', description: 'Puding coklat lembut', rating: 4.4, reviews: 167, orders: 456 },
            { id: 28, name: 'Klepon', category: 'dessert', price: 8000, image: '🍡', description: 'Klepon isi gula merah dengan kelapa', rating: 4.5, reviews: 198, orders: 543 },
            { id: 29, name: 'Dadar Gulung', category: 'dessert', price: 10000, image: '🥞', description: 'Dadar gulung isi kelapa manis', rating: 4.3, reviews: 123, orders: 345 },
            { id: 30, name: 'Pisang Goreng', category: 'dessert', price: 9000, image: '🍌', description: 'Pisang goreng crispy', rating: 4.2, reviews: 289, orders: 765 },
            { id: 31, name: 'Onde-onde', category: 'dessert', price: 7000, image: '🍡', description: 'Onde-onde isi kacang hijau', rating: 4.4, reviews: 145, orders: 398 },
            { id: 32, name: 'Martabak Manis', category: 'dessert', price: 18000, image: '🥞', description: 'Martabak manis dengan topping keju', rating: 4.7, reviews: 312, orders: 876 },
            { id: 33, name: 'Kolak Pisang', category: 'dessert', price: 11000, image: '🍌', description: 'Kolak pisang dengan santan', rating: 4.3, reviews: 98, orders: 267 },
            { id: 34, name: 'Cendol Dawet', category: 'dessert', price: 13000, image: '🍧', description: 'Cendol dawet dengan es serut', rating: 4.5, reviews: 176, orders: 432 },
            { id: 35, name: 'Kue Lapis', category: 'dessert', price: 16000, image: '🍰', description: 'Kue lapis legit tradisional', rating: 4.6, reviews: 134, orders: 321 },

            // Snack
            { id: 36, name: 'Keripik Singkong', category: 'snack', price: 8000, image: '🥔', description: 'Keripik singkong renyah', rating: 4.2, reviews: 234, orders: 654 },
            { id: 37, name: 'Rempeyek Kacang', category: 'snack', price: 6000, image: '🥜', description: 'Rempeyek kacang gurih', rating: 4.1, reviews: 156, orders: 432 },
            { id: 38, name: 'Kacang Telur', category: 'snack', price: 7000, image: '🥜', description: 'Kacang telur pedas manis', rating: 4.3, reviews: 189, orders: 543 },
            { id: 39, name: 'Kerupuk Udang', category: 'snack', price: 9000, image: '🦐', description: 'Kerupuk udang asli', rating: 4.4, reviews: 167, orders: 456 },
            { id: 40, name: 'Emping Melinjo', category: 'snack', price: 10000, image: '🌰', description: 'Emping melinjo original', rating: 4.2, reviews: 123, orders: 345 },
            { id: 41, name: 'Kripik Tempe', category: 'snack', price: 8500, image: '🌱', description: 'Kripik tempe renyah', rating: 4.3, reviews: 145, orders: 398 },
            { id: 42, name: 'Asinan Betawi', category: 'snack', price: 12000, image: '🥒', description: 'Asinan sayur segar', rating: 4.5, reviews: 198, orders: 567 },
            { id: 43, name: 'Rujak Buah', category: 'snack', price: 15000, image: '🍎', description: 'Rujak buah dengan bumbu petis', rating: 4.6, reviews: 234, orders: 678 },
            { id: 44, name: 'Cireng Isi', category: 'snack', price: 11000, image: '🥟', description: 'Cireng isi ayam pedas', rating: 4.4, reviews: 176, orders: 487 },
            { id: 45, name: 'Tahu Bulat', category: 'snack', price: 5000, image: '🧈', description: 'Tahu bulat goreng dengan saus', rating: 4.1, reviews: 298, orders: 876 },
            { id: 46, name: 'Bakwan Jagung', category: 'snack', price: 6500, image: '🌽', description: 'Bakwan jagung crispy', rating: 4.2, reviews: 167, orders: 456 },
            { id: 47, name: 'Pisang Molen', category: 'snack', price: 9500, image: '🍌', description: 'Pisang molen dengan keju', rating: 4.4, reviews: 134, orders: 367 },
            { id: 48, name: 'Lumpia Semarang', category: 'snack', price: 13000, image: '🌯', description: 'Lumpia semarang isi rebung', rating: 4.5, reviews: 189, orders: 523 },
            { id: 49, name: 'Siomay Bandung', category: 'snack', price: 14000, image: '🥟', description: 'Siomay dengan bumbu kacang', rating: 4.6, reviews: 212, orders: 598 },
            { id: 50, name: 'Batagor Crispy', category: 'snack', price: 16000, image: '🍤', description: 'Batagor goreng dengan saus kacang', rating: 4.7, reviews: 156, orders: 432 }
        ];

        // Add variants to menu items
        menuData.forEach(item => {
            if (item.category === 'makanan-utama') {
                item.variants = {
                    size: [
                        { name: 'Regular', price: 0 },
                        { name: 'Large', price: 5000 }
                    ],
                    spice: [
                        { name: 'Tidak Pedas', price: 0 },
                        { name: 'Pedas', price: 0 },
                        { name: 'Extra Pedas', price: 2000 }
                    ]
                };
            } else if (item.category === 'minuman') {
                item.variants = {
                    size: [
                        { name: 'Regular', price: 0 },
                        { name: 'Large', price: 3000 }
                    ],
                    ice: [
                        { name: 'Es Normal', price: 0 },
                        { name: 'Sedikit Es', price: 0 },
                        { name: 'Tanpa Es', price: 0 }
                    ]
                };
            } else {
                item.variants = {
                    size: [
                        { name: 'Regular', price: 0 },
                        { name: 'Large', price: 2000 }
                    ]
                };
            }
        });

        // Global variables
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        let currentMenuItem = null;
        let currentQuantity = 1;
        let selectedVariants = {};
        let appliedPromo = null;
        let currentFilter = 'all';
        let currentSort = 'name';
        let displayedItems = 20;

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            renderMenu();
            updateCartCount();
            updateCartDisplay();
            loadAdminData();
            renderPopularMenu();
            renderRecommendedItems();
            setupEventListeners();
            updateLastUpdate();
        });

        // Setup event listeners
        function setupEventListeners() {
            // Search functionality
            document.getElementById('searchInput')?.addEventListener('input', function(e) {
                const searchTerm = e.target.value.toLowerCase();
                filterAndRenderMenu();
            });

            // Sort functionality
            document.getElementById('sortSelect')?.addEventListener('change', function(e) {
                currentSort = e.target.value;
                filterAndRenderMenu();
            });

            // Delivery time change
            document.getElementById('deliveryTime')?.addEventListener('change', function(e) {
                const scheduledGroup = document.getElementById('scheduledTimeGroup');
                if (e.target.value === 'scheduled') {
                    scheduledGroup.style.display = 'block';
                    // Set minimum time to 1 hour from now
                    const now = new Date();
                    now.setHours(now.getHours() + 1);
                    document.getElementById('scheduledTime').min = now.toISOString().slice(0, 16);
                } else {
                    scheduledGroup.style.display = 'none';
                }
            });
        }

        // Page navigation
        function showPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Show selected page
            document.getElementById(pageId).classList.add('active');
            
            // Update navigation
            document.querySelectorAll('.nav-links a, .mobile-nav-item').forEach(link => {
                link.classList.remove('active');
            });
            
            // Update active nav item
            const navLinks = document.querySelectorAll('.nav-links a, .mobile-nav-item');
            navLinks.forEach(link => {
                if (link.getAttribute('onclick')?.includes(pageId)) {
                    link.classList.add('active');
                }
            });

            // Special handling for specific pages
            if (pageId === 'cart') {
                updateCartDisplay();
            } else if (pageId === 'checkout') {
                updateCheckoutDisplay();
            } else if (pageId === 'admin') {
                loadAdminData();
            }
        }

        // Menu functions
        function renderMenu(category = 'all') {
            currentFilter = category;
            filterAndRenderMenu();
        }

        function filterAndRenderMenu() {
            const menuGrid = document.getElementById('menuGrid');
            const searchTerm = document.getElementById('searchInput')?.value.toLowerCase() || '';
            
            let filteredMenu = currentFilter === 'all' ? [...menuData] : menuData.filter(item => item.category === currentFilter);
            
            // Apply search filter
            if (searchTerm) {
                filteredMenu = filteredMenu.filter(item => 
                    item.name.toLowerCase().includes(searchTerm) || 
                    item.description.toLowerCase().includes(searchTerm)
                );
            }

            // Apply sorting
            filteredMenu.sort((a, b) => {
                switch (currentSort) {
                    case 'price-low':
                        return a.price - b.price;
                    case 'price-high':
                        return b.price - a.price;
                    case 'rating':
                        return b.rating - a.rating;
                    case 'popular':
                        return b.reviews - a.reviews; // Sort by review count
                    default:
                        return a.name.localeCompare(b.name);
                }
            });

            // Limit displayed items
            const itemsToShow = filteredMenu.slice(0, displayedItems);
            
            menuGrid.innerHTML = itemsToShow.map(item => `
                <div class="menu-item" onclick="openMenuModal(${item.id})">
                    <div class="menu-item-image">${item.image}</div>
                    <div class="menu-item-content">
                        <h3>${item.name}</h3>
                        <div class="menu-item-price">${formatCurrency(item.price)}</div>
                        <div style="display: flex; align-items: center; gap: 0.5rem; margin: 0.5rem 0; font-size: 0.9rem;">
                            <span style="color: #ffd700;">${generateStars(item.rating)}</span>
                            <span style="font-weight: 600; color: #667eea;">${item.rating}</span>
                            <span style="color: #666;">(${item.reviews} review)</span>
                        </div>
                        <div style="font-size: 0.8rem; color: #28a745; margin-bottom: 0.5rem;">
                            🔥 ${item.orders.toLocaleString('id-ID')} orang sudah pesan
                        </div>
                        <div class="menu-item-description">${item.description}</div>
                        <button class="btn" onclick="event.stopPropagation(); openMenuModal(${item.id})">
                            Pesan Sekarang
                        </button>
                    </div>
                </div>
            `).join('');

            // Update menu count
            document.getElementById('menuCount').textContent = `Menampilkan ${itemsToShow.length} dari ${filteredMenu.length} menu`;
            
            // Show/hide load more button
            const loadMoreBtn = document.getElementById('loadMoreBtn');
            if (filteredMenu.length > displayedItems) {
                loadMoreBtn.style.display = 'block';
            } else {
                loadMoreBtn.style.display = 'none';
            }
        }

        function filterMenu(category) {
            // Update filter buttons
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            displayedItems = 20; // Reset displayed items
            renderMenu(category);
        }

        function clearFilters() {
            document.getElementById('searchInput').value = '';
            document.getElementById('sortSelect').value = 'name';
            currentSort = 'name';
            displayedItems = 20;
            
            // Reset active filter
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector('.filter-btn').classList.add('active');
            
            renderMenu('all');
        }

        function loadMoreItems() {
            displayedItems += 20;
            filterAndRenderMenu();
        }

        function renderPopularMenu() {
            const popularContainer = document.getElementById('popularMenu');
            if (!popularContainer) return;

            const popularItems = menuData.slice(0, 6); // First 6 items as popular
            
            popularContainer.innerHTML = popularItems.map(item => `
                <div class="menu-item" onclick="openMenuModal(${item.id})" style="background: rgba(255,255,255,0.95);">
                    <div class="menu-item-image">${item.image}</div>
                    <div class="menu-item-content">
                        <h3>${item.name}</h3>
                        <div class="menu-item-price">${formatCurrency(item.price)}</div>
                        <div style="display: flex; align-items: center; gap: 0.3rem; margin: 0.5rem 0; font-size: 0.8rem;">
                            <span style="color: #ffd700;">${generateStars(item.rating)}</span>
                            <span style="font-weight: 600; color: #667eea;">${item.rating}</span>
                        </div>
                        <div style="font-size: 0.7rem; color: #28a745; margin-bottom: 0.5rem;">
                            🔥 ${item.orders.toLocaleString('id-ID')} pesanan
                        </div>
                        <button class="btn" onclick="event.stopPropagation(); openMenuModal(${item.id})" style="background: #667eea;">
                            Pesan
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function renderRecommendedItems() {
            const recommendedContainer = document.getElementById('recommendedItems');
            if (!recommendedContainer) return;

            const recommended = menuData.slice(0, 4); // First 4 items as recommended
            
            recommendedContainer.innerHTML = recommended.map(item => `
                <div onclick="openMenuModal(${item.id})" style="background: rgba(255,255,255,0.1); padding: 1rem; border-radius: 10px; cursor: pointer; text-align: center; transition: all 0.3s ease;" 
                     onmouseover="this.style.background='rgba(255,255,255,0.2)'" 
                     onmouseout="this.style.background='rgba(255,255,255,0.1)'">
                    <div style="font-size: 2rem; margin-bottom: 0.5rem;">${item.image}</div>
                    <div style="font-weight: 600; margin-bottom: 0.25rem;">${item.name}</div>
                    <div style="color: #ffd700; font-size: 0.8rem; margin-bottom: 0.25rem;">
                        ${generateStars(item.rating)} ${item.rating}
                    </div>
                    <div style="color: #ffd700;">${formatCurrency(item.price)}</div>
                    <div style="font-size: 0.7rem; color: rgba(255,255,255,0.8); margin-top: 0.25rem;">
                        ${item.orders.toLocaleString('id-ID')} pesanan
                    </div>
                </div>
            `).join('');
        }

        // Modal functions
        function openMenuModal(itemId) {
            currentMenuItem = menuData.find(item => item.id === itemId);
            if (!currentMenuItem) return;

            document.getElementById('modalTitle').textContent = currentMenuItem.name;
            document.getElementById('modalImage').textContent = currentMenuItem.image;
            document.getElementById('modalDescription').innerHTML = `
                <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 1rem;">
                    <span style="color: #ffd700; font-size: 1.1rem;">${generateStars(currentMenuItem.rating)}</span>
                    <span style="font-weight: 600; color: #667eea; font-size: 1.1rem;">${currentMenuItem.rating}</span>
                    <span style="color: #666;">• ${currentMenuItem.reviews} review</span>
                </div>
                <div style="font-size: 0.9rem; color: #28a745; margin-bottom: 1rem;">
                    🔥 <strong>${currentMenuItem.orders.toLocaleString('id-ID')} orang</strong> sudah memesan menu ini
                </div>
                <p>${currentMenuItem.description}</p>
            `;
            document.getElementById('modalPrice').textContent = formatCurrency(currentMenuItem.price);
            
            // Reset modal state
            currentQuantity = 1;
            selectedVariants = {};
            document.getElementById('modalQuantity').textContent = currentQuantity;
            
            // Render variants
            renderModalVariants();
            
            document.getElementById('menuModal').classList.add('active');
        }

        function renderModalVariants() {
            const variantsContainer = document.getElementById('modalVariants');
            if (!currentMenuItem.variants) {
                variantsContainer.innerHTML = '';
                return;
            }

            variantsContainer.innerHTML = Object.entries(currentMenuItem.variants).map(([variantType, options]) => `
                <div class="variant-group">
                    <label>${getVariantLabel(variantType)}:</label>
                    <div class="variant-options">
                        ${options.map((option, index) => `
                            <div class="variant-option ${index === 0 ? 'selected' : ''}" 
                                 onclick="selectVariant('${variantType}', ${index})">
                                ${option.name} ${option.price > 0 ? `(+${formatCurrency(option.price)})` : ''}
                            </div>
                        `).join('')}
                    </div>
                </div>
            `).join('');

            // Initialize selected variants with first option of each type
            Object.keys(currentMenuItem.variants).forEach(variantType => {
                selectedVariants[variantType] = 0;
            });
        }

        function getVariantLabel(variantType) {
            const labels = {
                size: 'Ukuran',
                spice: 'Level Pedas',
                ice: 'Es',
                topping: 'Topping'
            };
            return labels[variantType] || variantType;
        }

        function selectVariant(variantType, optionIndex) {
            selectedVariants[variantType] = optionIndex;
            
            // Update UI
            const variantGroup = document.querySelector(`[onclick*="${variantType}"]`).closest('.variant-group');
            variantGroup.querySelectorAll('.variant-option').forEach((option, index) => {
                option.classList.toggle('selected', index === optionIndex);
            });
        }

        function changeQuantity(delta) {
            currentQuantity = Math.max(1, currentQuantity + delta);
            document.getElementById('modalQuantity').textContent = currentQuantity;
        }

        function closeModal() {
            document.getElementById('menuModal').classList.remove('active');
        }

        // Cart functions
        function addToCart() {
            if (!currentMenuItem) return;

            const cartItem = {
                id: currentMenuItem.id,
                name: currentMenuItem.name,
                image: currentMenuItem.image,
                basePrice: currentMenuItem.price,
                quantity: currentQuantity,
                variants: { ...selectedVariants },
                variantDetails: getVariantDetails(),
                totalPrice: calculateItemPrice()
            };

            // Check if item with same variants already exists
            const existingItemIndex = cart.findIndex(item => 
                item.id === cartItem.id && 
                JSON.stringify(item.variants) === JSON.stringify(cartItem.variants)
            );

            if (existingItemIndex > -1) {
                cart[existingItemIndex].quantity += cartItem.quantity;
                cart[existingItemIndex].totalPrice = cart[existingItemIndex].quantity * 
                    (cart[existingItemIndex].basePrice + getVariantPriceTotal(cart[existingItemIndex].variants));
            } else {
                cart.push(cartItem);
            }

            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartCount();
            closeModal();
            showNotification('Item berhasil ditambahkan ke keranjang!', 'success');
        }

        function getVariantDetails() {
            if (!currentMenuItem.variants) return {};
            
            const details = {};
            Object.entries(selectedVariants).forEach(([variantType, optionIndex]) => {
                const option = currentMenuItem.variants[variantType][optionIndex];
                details[variantType] = option;
            });
            return details;
        }

        function calculateItemPrice() {
            const basePrice = currentMenuItem.price;
            const variantPrice = getVariantPriceTotal(selectedVariants);
            return (basePrice + variantPrice) * currentQuantity;
        }

        function getVariantPriceTotal(variants) {
            if (!currentMenuItem.variants) return 0;
            
            let total = 0;
            Object.entries(variants).forEach(([variantType, optionIndex]) => {
                if (currentMenuItem.variants[variantType] && currentMenuItem.variants[variantType][optionIndex]) {
                    total += currentMenuItem.variants[variantType][optionIndex].price;
                }
            });
            return total;
        }

        function updateCartCount() {
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            document.getElementById('cartCount').textContent = totalItems;
        }

        function updateCartDisplay() {
            const cartItemsContainer = document.getElementById('cartItems');
            const cartSummary = document.getElementById('cartSummary');
            const emptyCart = document.getElementById('emptyCart');
            const cartHeader = document.getElementById('cartHeader');

            if (cart.length === 0) {
                cartItemsContainer.innerHTML = '';
                cartSummary.style.display = 'none';
                emptyCart.style.display = 'block';
                cartHeader.style.display = 'none';
                return;
            }

            emptyCart.style.display = 'none';
            cartSummary.style.display = 'block';
            cartHeader.style.display = 'block';

            cartItemsContainer.innerHTML = cart.map((item, index) => `
                <div class="cart-item">
                    <div class="cart-item-image">${item.image}</div>
                    <div class="cart-item-details">
                        <div class="cart-item-name">${item.name}</div>
                        <div class="cart-item-variants">
                            ${Object.entries(item.variantDetails).map(([type, option]) => 
                                `${getVariantLabel(type)}: ${option.name}`
                            ).join(', ')}
                        </div>
                        <div class="cart-item-price">${formatCurrency(item.totalPrice)}</div>
                    </div>
                    <div class="quantity-selector">
                        <button class="quantity-btn" onclick="updateCartItemQuantity(${index}, -1)">-</button>
                        <span class="quantity-display">${item.quantity}</span>
                        <button class="quantity-btn" onclick="updateCartItemQuantity(${index}, 1)">+</button>
                    </div>
                    <button class="quantity-btn" onclick="removeFromCart(${index})" style="background: #e74c3c; border-color: #e74c3c; color: white;">
                        🗑️
                    </button>
                </div>
            `).join('');

            updateCartSummary();
            updateFreeShippingProgress();
        }

        function updateFreeShippingProgress() {
            const subtotal = cart.reduce((sum, item) => sum + item.totalPrice, 0);
            const freeShippingThreshold = 75000;
            const remaining = Math.max(0, freeShippingThreshold - subtotal);
            
            const remainingElement = document.getElementById('freeShippingRemaining');
            const cartHeader = document.getElementById('cartHeader');
            
            if (remainingElement && cartHeader) {
                if (remaining > 0) {
                    remainingElement.textContent = formatCurrency(remaining);
                    cartHeader.innerHTML = `<p>💡 <strong>Tips:</strong> Tambah item senilai <span id="freeShippingRemaining">${formatCurrency(remaining)}</span> lagi untuk mendapat gratis ongkir!</p>`;
                } else {
                    cartHeader.innerHTML = `<p>🎉 <strong>Selamat!</strong> Anda mendapat gratis ongkos kirim!</p>`;
                }
            }
        }

        // Promo code functions
        function applyPromoCode() {
            const promoInput = document.getElementById('promoCode');
            const promoMessage = document.getElementById('promoMessage');
            const code = promoInput.value.toUpperCase();

            const promoCodes = {
                'HEMAT25': { type: 'percentage', value: 25, minOrder: 100000, description: 'Diskon 25%' },
                'GRATIS10': { type: 'fixed', value: 10000, minOrder: 50000, description: 'Diskon Rp 10.000' },
                'NEWUSER': { type: 'percentage', value: 15, minOrder: 0, description: 'Diskon 15% untuk pengguna baru' }
            };

            const subtotal = cart.reduce((sum, item) => sum + item.totalPrice, 0);
            
            if (!code) {
                promoMessage.innerHTML = '<span style="color: #dc3545;">Masukkan kode promo</span>';
                return;
            }

            if (!promoCodes[code]) {
                promoMessage.innerHTML = '<span style="color: #dc3545;">Kode promo tidak valid</span>';
                return;
            }

            const promo = promoCodes[code];
            
            if (subtotal < promo.minOrder) {
                promoMessage.innerHTML = `<span style="color: #dc3545;">Minimal pembelian ${formatCurrency(promo.minOrder)}</span>`;
                return;
            }

            appliedPromo = { code, ...promo };
            promoMessage.innerHTML = `<span style="color: #28a745;">✓ ${promo.description} berhasil diterapkan!</span>`;
            promoInput.value = '';
            
            updateCartSummary();
            showNotification(`Promo ${code} berhasil diterapkan!`, 'success');
        }

        function applyCheckoutPromo() {
            const promoInput = document.getElementById('checkoutPromoCode');
            const code = promoInput.value.toUpperCase();

            // Copy promo code to main cart if not already applied
            if (code) {
                document.getElementById('promoCode').value = code;
                applyPromoCode();
                updateCheckoutDisplay();
            }
        }

        function updateCartItemQuantity(index, delta) {
            if (cart[index].quantity + delta <= 0) {
                removeFromCart(index);
                return;
            }

            cart[index].quantity += delta;
            const itemPrice = cart[index].basePrice + getVariantPriceTotal(cart[index].variants);
            cart[index].totalPrice = cart[index].quantity * itemPrice;

            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartCount();
            updateCartDisplay();
        }

        function removeFromCart(index) {
            cart.splice(index, 1);
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartCount();
            updateCartDisplay();
            showNotification('Item berhasil dihapus dari keranjang', 'success');
        }

        function updateCartSummary() {
            const subtotal = cart.reduce((sum, item) => sum + item.totalPrice, 0);
            let discount = 0;
            
            // Calculate discount
            if (appliedPromo) {
                if (appliedPromo.type === 'percentage') {
                    discount = Math.floor(subtotal * appliedPromo.value / 100);
                } else {
                    discount = appliedPromo.value;
                }
            }

            // Check for free shipping
            const freeShippingThreshold = 75000;
            const shipping = subtotal >= freeShippingThreshold ? 0 : 10000;
            
            const total = subtotal - discount + shipping;
            const itemCount = cart.reduce((sum, item) => sum + item.quantity, 0);

            // Update cart page elements
            const subtotalElement = document.getElementById('subtotal');
            const discountElement = document.getElementById('discount');
            const discountRow = document.getElementById('discountRow');
            const shippingElement = document.getElementById('shipping');
            const totalElement = document.getElementById('total');
            const itemCountElement = document.getElementById('itemCount');

            if (subtotalElement) subtotalElement.textContent = formatCurrency(subtotal);
            if (itemCountElement) itemCountElement.textContent = itemCount;
            
            if (discount > 0 && discountElement && discountRow) {
                discountElement.textContent = `-${formatCurrency(discount)}`;
                discountRow.style.display = 'flex';
            } else if (discountRow) {
                discountRow.style.display = 'none';
            }
            
            if (shippingElement) {
                shippingElement.textContent = shipping === 0 ? 'GRATIS' : formatCurrency(shipping);
                shippingElement.style.color = shipping === 0 ? '#28a745' : 'inherit';
            }
            
            if (totalElement) totalElement.textContent = formatCurrency(total);
        }

        // Checkout functions
        function updateCheckoutDisplay() {
            const checkoutItems = document.getElementById('checkoutItems');
            
            checkoutItems.innerHTML = cart.map(item => `
                <div style="display: flex; justify-content: space-between; align-items: center; padding: 0.8rem 0; border-bottom: 1px solid #eee;">
                    <div style="flex: 1;">
                        <div style="font-weight: 600;">${item.name}</div>
                        <div style="font-size: 0.9rem; color: #666;">
                            ${Object.entries(item.variantDetails).map(([type, option]) => 
                                `${getVariantLabel(type)}: ${option.name}`
                            ).join(', ')}
                        </div>
                        <div style="font-size: 0.9rem; color: #667eea;">Qty: ${item.quantity}</div>
                    </div>
                    <div style="font-weight: 600;">${formatCurrency(item.totalPrice)}</div>
                </div>
            `).join('');

            const subtotal = cart.reduce((sum, item) => sum + item.totalPrice, 0);
            let discount = 0;
            
            if (appliedPromo) {
                if (appliedPromo.type === 'percentage') {
                    discount = Math.floor(subtotal * appliedPromo.value / 100);
                } else {
                    discount = appliedPromo.value;
                }
            }

            const freeShippingThreshold = 75000;
            const shipping = subtotal >= freeShippingThreshold ? 0 : 10000;
            const total = subtotal - discount + shipping;
            const itemCount = cart.reduce((sum, item) => sum + item.quantity, 0);

            // Update checkout elements
            document.getElementById('checkoutSubtotal').textContent = formatCurrency(subtotal);
            document.getElementById('checkoutItemCount').textContent = itemCount;
            
            const checkoutDiscountRow = document.getElementById('checkoutDiscountRow');
            const checkoutDiscount = document.getElementById('checkoutDiscount');
            
            if (discount > 0 && checkoutDiscountRow && checkoutDiscount) {
                checkoutDiscount.textContent = `-${formatCurrency(discount)}`;
                checkoutDiscountRow.style.display = 'flex';
            } else if (checkoutDiscountRow) {
                checkoutDiscountRow.style.display = 'none';
            }
            
            const checkoutShipping = document.getElementById('checkoutShipping');
            if (checkoutShipping) {
                checkoutShipping.textContent = shipping === 0 ? 'GRATIS' : formatCurrency(shipping);
                checkoutShipping.style.color = shipping === 0 ? '#28a745' : 'inherit';
            }
            
            document.getElementById('checkoutTotal').textContent = formatCurrency(total);
        }

        // Delivery options
        function updateDeliveryOptions() {
            const deliveryType = document.getElementById('deliveryType').value;
            const addressGroup = document.getElementById('addressGroup');
            const deliveryTimeGroup = document.getElementById('deliveryTimeGroup');
            const estimatedTime = document.getElementById('estimatedTime');
            const checkoutShipping = document.getElementById('checkoutShipping');
            
            if (deliveryType === 'pickup') {
                addressGroup.style.display = 'none';
                deliveryTimeGroup.querySelector('label').textContent = 'Waktu Pengambilan *';
                estimatedTime.textContent = '15-20 menit';
                if (checkoutShipping) {
                    checkoutShipping.textContent = 'GRATIS';
                    checkoutShipping.style.color = '#28a745';
                }
                document.getElementById('customerAddress').required = false;
            } else {
                addressGroup.style.display = 'block';
                deliveryTimeGroup.querySelector('label').textContent = 'Waktu Pengiriman *';
                estimatedTime.textContent = '25-35 menit';
                document.getElementById('customerAddress').required = true;
                updateCheckoutDisplay(); // Recalculate shipping
            }
        }

        function selectPayment(method) {
            document.querySelectorAll('input[name="paymentMethod"]').forEach(radio => {
                radio.checked = radio.value === method;
                radio.closest('label').style.borderColor = radio.checked ? '#667eea' : '#ddd';
                radio.closest('label').style.background = radio.checked ? '#f8f9ff' : 'white';
            });
        }

        // Form submission
        document.getElementById('checkoutForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            if (cart.length === 0) {
                showNotification('Keranjang kosong!', 'error');
                return;
            }

            const formData = new FormData(this);
            const orderData = {
                order_id: generateOrderId(),
                timestamp: new Date().toISOString(),
                customer_name: formData.get('customerName'),
                customer_phone: formData.get('customerPhone'),
                customer_address: formData.get('customerAddress'),
                payment_method: formData.get('paymentMethod'),
                notes: formData.get('notes') || '',
                items: cart.map(item => ({
                    id: item.id,
                    name: item.name,
                    variants: item.variantDetails,
                    quantity: item.quantity,
                    unit_price: item.basePrice + getVariantPriceTotal(item.variants),
                    total_price: item.totalPrice
                })),
                subtotal: cart.reduce((sum, item) => sum + item.totalPrice, 0),
                shipping: 10000,
                total: cart.reduce((sum, item) => sum + item.totalPrice, 0) + 10000,
                status: 'pending'
            };

            try {
                showLoading(true);
                await submitOrder(orderData);
                
                // Clear cart
                cart = [];
                localStorage.setItem('cart', JSON.stringify(cart));
                updateCartCount();
                
                // Reset form
                this.reset();
                
                showNotification('Pesanan berhasil dikirim! Anda akan dihubungi segera.', 'success');
                showPage('home');
                
            } catch (error) {
                console.error('Order submission error:', error);
                showNotification('Gagal mengirim pesanan. Silakan coba lagi.', 'error');
            } finally {
                showLoading(false);
            }
        });

        async function submitOrder(orderData) {
            // Validate configuration
            if (CONFIG.APPS_SCRIPT_WEBHOOK_URL === '{https://script.google.com/macros/s/AKfycbzcddJH0qnZ5Uak3GRDSpbzdUfw7eu_gAtC2eg3j7koJ3g_0T-2LWwBoFP63IppRPNYaA/exec}') {
                throw new Error('Apps Script webhook URL belum dikonfigurasi');
            }

            // Submit to Apps Script
            const response = await fetch(CONFIG.APPS_SCRIPT_WEBHOOK_URL, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(orderData)
            });

            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }

            const result = await response.json();
            
            if (!result.success) {
                throw new Error(result.error || 'Unknown error');
            }

            // Send WhatsApp notification
            try {
                await sendWhatsAppNotification(orderData);
            } catch (waError) {
                console.error('WhatsApp notification failed:', waError);
                // Don't throw error for WhatsApp failure
            }

            return result;
        }

        async function sendWhatsAppNotification(orderData) {
            if (CONFIG.NGIRIMWA_API_KEY === '{NGIRIMWA_API_KEY}') {
                // Fallback: Open WhatsApp directly
                const message = createWhatsAppMessage(orderData);
                const whatsappUrl = `https://wa.me/62${CONFIG.ADMIN_WHATSAPP}?text=${encodeURIComponent(message)}`;
                window.open(whatsappUrl, '_blank');
                return;
            }

            // Use NgirimWA API
            const message = createWhatsAppMessage(orderData);
            
            const response = await fetch('https://api.ngirimwa.com/send', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${CONFIG.NGIRIMWA_API_KEY}`
                },
                body: JSON.stringify({
                    phone: CONFIG.ADMIN_WHATSAPP,
                    message: message
                })
            });

            if (!response.ok) {
                throw new Error('WhatsApp API failed');
            }
        }

        function createWhatsAppMessage(orderData) {
            const itemsList = orderData.items.map(item => 
                `• ${item.name} (${item.quantity}x) - ${formatCurrency(item.total_price)}`
            ).join('\n');

            return `🍽️ *PESANAN BARU*

📋 *Order ID:* ${orderData.order_id}
📅 *Waktu:* ${new Date(orderData.timestamp).toLocaleString('id-ID')}

👤 *Data Pelanggan:*
Nama: ${orderData.customer_name}
Telepon: ${orderData.customer_phone}
Alamat: ${orderData.customer_address}

🛒 *Detail Pesanan:*
${itemsList}

💰 *Ringkasan:*
Subtotal: ${formatCurrency(orderData.subtotal)}
Ongkir: ${formatCurrency(orderData.shipping)}
*Total: ${formatCurrency(orderData.total)}*

💳 *Pembayaran:* ${orderData.payment_method}
📝 *Catatan:* ${orderData.notes || 'Tidak ada'}

Mohon konfirmasi pesanan ini. Terima kasih! 🙏`;
        }

        // Admin functions
        function loadAdminData() {
            // Load orders from localStorage (in real app, this would come from server)
            const orders = JSON.parse(localStorage.getItem('orders')) || [];
            const customers = new Set(orders.map(order => order.customer_phone)).size;
            
            // Update stats
            document.getElementById('totalOrders').textContent = orders.length;
            document.getElementById('totalRevenue').textContent = formatCurrency(
                orders.reduce((sum, order) => sum + order.total, 0)
            );
            document.getElementById('pendingOrders').textContent = 
                orders.filter(order => order.status === 'pending').length;
            document.getElementById('totalCustomers').textContent = customers;

            // Update orders table
            renderOrdersTable(orders);
        }

        function renderOrdersTable(orders) {
            const tableBody = document.getElementById('ordersTableBody');
            
            if (orders.length === 0) {
                tableBody.innerHTML = `
                    <tr>
                        <td colspan="7" style="text-align: center; padding: 2rem; color: #666;">
                            Belum ada pesanan
                        </td>
                    </tr>
                `;
                return;
            }

            tableBody.innerHTML = orders.slice(-20).reverse().map(order => {
                const statusColors = {
                    pending: '#ffeaa7',
                    processing: '#74b9ff',
                    completed: '#00b894',
                    cancelled: '#ff7675'
                };
                
                const itemsCount = order.items ? order.items.length : 0;
                
                return `
                    <tr>
                        <td style="font-family: monospace;">${order.order_id}</td>
                        <td>
                            <div style="font-weight: 600;">${order.customer_name}</div>
                            <small style="color: #666;">${order.customer_phone}</small>
                        </td>
                        <td>${itemsCount} item${itemsCount > 1 ? 's' : ''}</td>
                        <td style="font-weight: 600;">${formatCurrency(order.total)}</td>
                        <td>
                            <span style="padding: 0.25rem 0.8rem; background: ${statusColors[order.status] || '#ddd'}; border-radius: 15px; font-size: 0.8rem; text-transform: capitalize;">
                                ${order.status}
                            </span>
                        </td>
                        <td style="font-size: 0.9rem;">${new Date(order.timestamp).toLocaleString('id-ID')}</td>
                        <td>
                            <button onclick="viewOrderDetails('${order.order_id}')" style="padding: 0.25rem 0.5rem; background: #667eea; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 0.8rem;">
                                Detail
                            </button>
                        </td>
                    </tr>
                `;
            }).join('');
        }

        function refreshDashboard() {
            showNotification('Dashboard berhasil diperbarui', 'success');
            loadAdminData();
            updateLastUpdate();
        }

        function refreshOrders() {
            loadAdminData();
            showNotification('Data pesanan berhasil diperbarui', 'success');
        }

        function filterOrders() {
            const filter = document.getElementById('orderFilter').value;
            const orders = JSON.parse(localStorage.getItem('orders')) || [];
            
            const filteredOrders = filter === 'all' ? orders : orders.filter(order => order.status === filter);
            renderOrdersTable(filteredOrders);
        }

        function viewOrderDetails(orderId) {
            const orders = JSON.parse(localStorage.getItem('orders')) || [];
            const order = orders.find(o => o.order_id === orderId);
            
            if (order) {
                const itemsList = order.items ? order.items.map(item => 
                    `• ${item.name} (${item.quantity}x) - ${formatCurrency(item.total_price)}`
                ).join('\n') : 'Tidak ada detail item';

                alert(`Detail Pesanan ${orderId}

Pelanggan: ${order.customer_name}
Telepon: ${order.customer_phone}
Alamat: ${order.customer_address}

Items:
${itemsList}

Total: ${formatCurrency(order.total)}
Status: ${order.status}
Waktu: ${new Date(order.timestamp).toLocaleString('id-ID')}

Catatan: ${order.notes || 'Tidak ada'}`);
            }
        }

        function exportOrders() {
            const orders = JSON.parse(localStorage.getItem('orders')) || [];
            
            if (orders.length === 0) {
                showNotification('Tidak ada data untuk diekspor', 'error');
                return;
            }

            // Create CSV content
            const csvContent = [
                ['Order ID', 'Nama', 'Telepon', 'Total', 'Status', 'Waktu'].join(','),
                ...orders.map(order => [
                    order.order_id,
                    order.customer_name,
                    order.customer_phone,
                    order.total,
                    order.status,
                    new Date(order.timestamp).toLocaleString('id-ID')
                ].join(','))
            ].join('\n');

            // Download CSV
            const blob = new Blob([csvContent], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `orders_${new Date().toISOString().split('T')[0]}.csv`;
            a.click();
            window.URL.revokeObjectURL(url);
            
            showNotification('Laporan berhasil diunduh', 'success');
        }

        function toggleStoreStatus() {
            const isOpen = localStorage.getItem('storeOpen') !== 'false';
            localStorage.setItem('storeOpen', !isOpen);
            
            const button = event.target;
            if (isOpen) {
                button.textContent = '🏪 Buka Toko';
                button.style.background = '#28a745';
                showNotification('Toko ditutup sementara', 'success');
            } else {
                button.textContent = '🏪 Tutup Toko';
                button.style.background = '#dc3545';
                showNotification('Toko dibuka kembali', 'success');
            }
        }

        function updateLastUpdate() {
            const now = new Date().toLocaleString('id-ID');
            const lastUpdateElement = document.getElementById('lastUpdate');
            if (lastUpdateElement) {
                lastUpdateElement.textContent = now;
            }
        }

        // Utility functions
        function formatCurrency(amount) {
            return new Intl.NumberFormat('id-ID', {
                style: 'currency',
                currency: 'IDR',
                minimumFractionDigits: 0
            }).format(amount);
        }

        function generateStars(rating) {
            const fullStars = Math.floor(rating);
            const hasHalfStar = rating % 1 >= 0.5;
            const emptyStars = 5 - fullStars - (hasHalfStar ? 1 : 0);
            
            return '⭐'.repeat(fullStars) + 
                   (hasHalfStar ? '⭐' : '') + 
                   '☆'.repeat(emptyStars);
        }

        function generateOrderId() {
            const timestamp = Date.now().toString(36);
            const random = Math.random().toString(36).substr(2, 5);
            return `ORD-${timestamp}-${random}`.toUpperCase();
        }

        function showLoading(show) {
            document.getElementById('loading').classList.toggle('active', show);
        }

        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            const notificationText = document.getElementById('notificationText');
            
            notificationText.textContent = message;
            notification.className = `notification ${type}`;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // Close modal when clicking outside
        document.getElementById('menuModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });

        // Keyboard navigation
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeModal();
            }
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'98825500b5a4411c',t:'MTc1OTM4ODUyNC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
